/*! For license information please see d3.simplegraph.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.SimpleGraph=e(require("d3")):t.SimpleGraph=e(t.d3)}(self,(t=>(()=>{"use strict";var e={142:e=>{e.exports=t}},s={};function r(t){var i=s[t];if(void 0!==i)return i.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,r),n.exports}r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{var t,e,s;r.d(n,{default:()=>d}),String.prototype.startsWith||(t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,s=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var s=i.length,r=String(t),n=r.length,o=arguments.length>1?arguments[1]:void 0,a=o?Number(o):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),s);if(n+l>s)return!1;for(var c=-1;++c<n;)if(i.charCodeAt(l+c)!=r.charCodeAt(c))return!1;return!0},t?t(String.prototype,"startsWith",{value:s,configurable:!0,writable:!0}):String.prototype.startsWith=s),String.prototype.endsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var s=i.length,r=String(t),n=r.length,o=s;if(arguments.length>1){var a=arguments[1];void 0!==a&&(o=a?Number(a):0)!=o&&(o=0)}var l=Math.min(Math.max(o,0),s),c=l-n;if(c<0)return!1;for(var h=-1;++h<n;)if(i.charCodeAt(c+h)!=r.charCodeAt(h))return!1;return!0};t?t(String.prototype,"endsWith",{value:i,configurable:!0,writable:!0}):String.prototype.endsWith=i}();var o=r(142);const a=["diamond","circle","square","triangle","triangle-up","triangle-down"];function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function u(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function f(t){for(var e in t||(t={}),t.container||(t.container="body"),t.margins||(t.margins={}),t.axis||(t.axis={}),t.styles||(t.styles={}),this.allowDrawBeyondGraph=t.allowDrawBeyondGraph,this.margins={left:t.margins.left||0===t.margins.left?t.margins.left:40,right:t.margins.right||0===t.margins.right?t.margins.right:20,top:t.margins.top||0===t.margins.top?t.margins.top:20,bottom:t.margins.bottom||0===t.margins.bottom?t.margins.bottom:40},this.containerWidth=t.width?t.width:600,this.containerHeight=t.height?t.height:400,this.width=this.containerWidth-this.margins.left-this.margins.right,this.height=this.containerHeight-this.margins.top-this.margins.bottom,this.color=t.colorScale?t.colorScale:o.scaleOrdinal(o.schemeCategory10),this.customColors={},this.svg=o.select(t.container).append("svg").attr("width",this.containerWidth).attr("height",this.containerHeight).style("font-family","'Century Gothic', CenturyGothic, Geneva, AppleGothic, sans-serif").style("overflow","visible"),this.svgDefs=this.svg.append("defs"),this.svgGraph=this.svg.append("g").attr("transform","translate("+this.margins.left+","+this.margins.top+")"),t.styles)this.svg.style(e,t.styles[e]);return this.resetAxisOptions(t.axis),this}f.prototype.getSvgElement=function(){return this.svg},f.prototype.getSvgGraphic=function(){return this.svgGraph},f.prototype.remove=function(){return this.svg.remove(),this},f.prototype.destroy=function(){this.svg.remove(),this.svg=null,this.svgGraph=null,this.clearAllData(),this.color=null,this.customColors=null,this.x=null,this.y=null,this.minMax=null,this.xScale=null,this.yScale=null,this.yAxis=null,this.xAxis=null,this.yGridAxis=null,this.xGridAxis=null,this.points=null,this.ptSeriesShapes=null,this.lines=null,this.pointLines=null,this.areas=null},function(t){t.prototype.resetAxisOptions=function(t){var e=this;return t||(t={}),t.x||(t.x={}),t.y||(t.y={}),t.styles||(t.styles={}),this.axisStyles=t.style,this.axisStyles=this.axisStyles||{},this.axisStyles.fill=this.axisStyles.fill||"none",this.axisStyles["stroke-width"]=this.axisStyles["stroke-width"]||.5,this.axisStyles.stroke=this.axisStyles.stroke||"black",["x","y","y2"].forEach((function(i){if(!t[i]){if("y2"===i)return;t[i]={}}t[i].scale||(t[i].scale=d3.scaleLinear);var s,r,n=t[i].scale===d3.scaleTime||t[i].scale===d3.scaleUtc,o=!n&&t[i].scale===d3.scaleLog;if(t[i].format||(t[i].format=n?"%Y-%m-%d":".0f"),t[i].grid||(t[i].grid={}),o&&!t[i].logBase&&(t[i].logBase=10),e[i]={label:null===t[i].label?"x"===i?"x-value":"y-value":t[i].label,isDate:n,isLog:o},n?t[i].scale===d3.scaleUtc?e[i].format=d3.utcFormat(t[i].format):e[i].format=d3.timeFormat(t[i].format):e[i].format=d3.format(t[i].format),e[i].min=t[i].min?t[i].min:0,e[i].max=t[i].max?t[i].max:100,e[i].scale=t[i].scale(),o&&e[i].scale.base(t[i].logBase),t[i].break){e[i].break=t[i].break,s=[e[i].min,e[i].break.domain[0],e[i].break.domain[1],e[i].max];var a=n?s.map((function(t){return t.getTime()})):s,l="x"===i?e.width:e.height;r="x"===i?[0,0,0,l]:[l,0,0,0];var c=(l-e[i].break.rangegap)/(a[1]-a[0]+a[3]-a[2]);r[1]=c*(a[1]-a[0]),r[2]=r[1]+e[i].break.rangegap}else s=[e[i].min,e[i].max],r="x"===i?[0,e.width]:[e.height,0];e[i].scale.domain(s).range(r);var h=!1;"x"===i?(h=!0,e[i].axis=d3.axisBottom(e[i].scale),e[i].axisTwo=d3.axisTop(e[i].scale),e[i].gridAxis=d3.axisBottom(e[i].scale)):"y2"===i?(e[i].axis=d3.axisRight(e[i].scale),e[i].gridAxis=d3.axisRight(e[i].scale)):(e[i].axis=d3.axisLeft(e[i].scale),e[i].gridAxis=d3.axisLeft(e[i].scale)),o?(e[i].axis.tickFormat(e[i].format),t[i].ticks?e[i].axis.ticks(t[i].ticks,e[i].format):(e[i].axis.ticks(e[i].format),t[i].tickValues&&e[i].axis.tickValues(t[i].tickValues)),h&&(e[i].axisTwo.tickFormat(e[i].format),t[i].ticks?e[i].axisTwo.ticks(t[i].ticks,e[i].format):(e[i].axisTwo.ticks(e[i].format),t[i].tickValues&&e[i].axisTwo.tickValues(t[i].tickValues)))):(e[i].axis.tickFormat(e[i].format),t[i].tickValues?(e[i].axis.tickValues(t[i].tickValues),e[i].gridAxis.tickValues(t[i].tickValues)):(t[i].ticks||0===t[i].ticks)&&(Array.isArray(t[i].ticks)?(e[i].axis.ticks(t[i].ticks[0],t[i].ticks[1]),e[i].gridAxis.ticks(t[i].ticks[0],t[i].ticks[1])):(e[i].axis.ticks(t[i].ticks),e[i].gridAxis.ticks(t[i].ticks))),e[i].gridAxis.tickFormat(e[i].format),t[i].grid.tickValues?e[i].gridAxis.tickValues(t[i].grid.tickValues):(t[i].grid.ticks||0===t[i].grid.ticks)&&(Array.isArray(t[i].grid.ticks)?e[i].gridAxis.ticks(t[i].grid.ticks[0],t[i].grid.ticks[1]):e[i].gridAxis.ticks(t[i].grid.ticks)),h&&(e[i].axisTwo.tickFormat(e[i].format),t[i].tickValues?e[i].axisTwo.tickValues(t[i].tickValues):(t[i].ticks||0===t[i].ticks)&&(Array.isArray(t[i].ticks)?e[i].axisTwo.ticks(t[i].ticks[0],t[i].ticks[1]):e[i].axisTwo.ticks(t[i].ticks))))})),this.minMax={x:[this.x.min,this.x.max],y:[this.y.min,this.y.max]},this.xScale=this.x.scale,this.xAxis=this.x.axis,this.xGridAxis=this.x.gridAxes,this.yScale=this.y.scale,this.yAxis=this.y.axis,this.yGridAxis=this.y.gridAxes,this.removeAll(),this.drawAxes(),this},t.prototype.drawAxes=function(t,e,i){var s=this;e?"top"!==(e=e.toLowerCase().trim())&&(e="bottom"):e="bottom";var r,n=0;"top"!==e?(r=this.x.axis,n=this.height):r=this.x.axisTwo,i||(i=0),this.svg.selectAll(".sg-xaxis, .sg-yaxis, .sg-y2axis, .sg-axis-label").remove();var o=this.svgGraph.append("g").attr("class","sg-xaxis").attr("transform","translate(0,"+n+")").call(r).attr("font-size",null).attr("font-family",null),a=this.svgGraph.append("g").attr("class","sg-yaxis").call(this.y.axis).attr("font-size",null).attr("font-family",null),l=this.y2?this.svgGraph.append("g").attr("class","sg-y2axis").attr("transform","translate("+this.width+",0)").call(this.y2.axis).attr("font-size",null).attr("font-family",null):null;this.svgGraph.selectAll(".tick line").style("stroke","#000");var c=this.svgGraph.selectAll(".sg-xaxis .domain, .sg-yaxis .domain, .sg-y2axis .domain");for(var h in this.axisStyles)c.style(h,this.axisStyles[h]);var u={x:0,y:0,y2:0};this.svgGraph.selectAll(".sg-xaxis .tick").each((function(){this.getBBox().height>u.x&&(u.x=this.getBBox().height)})),this.svgGraph.selectAll(".sg-yaxis .tick").each((function(){this.getBBox().width>u.y&&(u.y=this.getBBox().width)})),this.svgGraph.selectAll(".sg-y2axis .tick").each((function(){this.getBBox().width>u.y2&&(u.y2=this.getBBox().width)}));var p={a:"middle",x:.5*this.width,y:"top"===e?-(u.x+i):u.x+10+i},y={a:"middle",x:-.5*this.height,y:-(u.y+10+i)},f={a:"middle",x:.5*this.height,y:-(u.y2+10+i)},d="center",g="center",m="center",x="outside",v="outside",b="outside";return t&&((t||"").toLowerCase().split(/[ ,]+/).forEach((function(t){var r=t.trim().split("-"),n=r.length>1&&r[0];switch(t=r.length>1?r[r.length-1]:r[0]){case"outside":n&&"x"!==n||(p.y="top"===e?-(u.x+i):u.x+10+i,x="outside"),n&&"y"!==n||(y.y=-(u.y+10+i),v="outside"),n&&"y2"!==n||(f.y=-(u.y2+10+i),b="outside");break;case"inside":n&&"x"!==n||(p.y="top"===e?14+i:-(6+i),x="inside"),n&&"y"!==n||(y.y=5,v="inside"),n&&"y2"!==n||(f.y=5,b="inside");case"center":n&&"x"!==n||(p.a="middle",p.x=.5*s.width,d="center"),n&&"y"!==n||(y.a="middle",y.x=-.5*s.height,g="center"),n&&"y2"!==n||(f.a="middle",f.x=.5*s.height,m="center");break;case"left":p.a="start",p.x=0,d="left";break;case"right":p.a="end",p.x=s.width,d="right";break;case"top":n&&"y"!==n||(y.a="end",y.x=0,g="top"),n&&"y2"!==n||(f.a="start",f.x=0,m="top");break;case"bottom":n&&"y"!==n||(y.a="start",y.x=-s.height,g="bottom"),n&&"y2"!==n||(f.a="end",f.x=s.height,m="bottom")}})),"inside"===x&&("left"===d?p.x+=10:"right"===d&&this.y2&&(p.x-=10),"bottom"===e?("left"===d&&"inside"===v&&"bottom"===g&&(p.x+=10,y.x+=10),"right"===d&&this.y2&&"inside"===b&&"bottom"===m&&(p.x-=10,f.x-=10)):("left"===d&&"inside"===v&&"top"===g&&(p.x+=10,y.x-=10),"right"===d&&this.y2&&"inside"===b&&"top"===m&&(p.x-=10,f.x+=10)))),"inside"===v&&("top"===g&&(y.x-=5),"bottom"===g&&(y.x+=5)),"inside"===b&&("top"===m&&(f.x+=5),"bottom"===m&&(y2LLabelPos.x-=5)),o.append("text").attr("class","sg-axis-label sg-xaxis").attr("x",p.x).attr("y",p.y).attr("fill","#000").style("text-anchor",p.a).style("font-weight","bolder").text(this.x.label),a.append("text").attr("class","sg-axis-label sg-yaxis").attr("transform","rotate(-90)").attr("x",y.x).attr("y",y.y).attr("dy",".71em").attr("fill","#000").style("text-anchor",y.a).style("font-weight","bolder").text(this.y.label),l&&l.append("text").attr("class","sg-axis-label sg-y2axis").attr("transform","rotate(90)").attr("x",f.x).attr("y",f.y).attr("dy",".71em").attr("fill","#000").style("text-anchor",f.a).style("font-weight","bolder").text(this.y2.label),this}}(f),function(t){t.prototype.getColorBySeriesName=function(t,e){if(!t)return null;if(t in this.customColors)return this.customColors[t];var i,s,r;if(this.points)for(var n in this.points)if(t===(i=this.points[n]).series)return i.style&&i.style.fill?i.style.fill:e||this.color.domain().indexOf(t)>=0?this.color(t):null;if(this.lines)for(var o in this.lines)if(t===(s=this.lines[o]).series)return s.style&&s.style.stroke?s.style.stroke:e||this.color.domain().indexOf(t)>=0?this.color(t):null;if(this.areas)for(var a in this.areas)if(t===(r=this.areas[a]).series)return r.style&&r.style.fill?r.style.fill:e||this.color.domain().indexOf(t)>=0?this.color(t):null;return e?this.color(t):null},t.prototype.resetColorScale=function(t){return t?this.color=t:this.color.domain([]),this},t.prototype.setSeriesColor=function(t,e){this.customColors[t]=e},t.prototype.removeSeriesColor=function(t){return this.customColors[t]&&delete this.customColors[t],this}}(f),function(t){t.prototype.drawGrid=function(t){this.svgGraph.selectAll(".sg-grid").remove();var e=t&&t.opacity?parseFloat(t.opacity):.4,i=t&&t.stroke?t.stroke:"#555",s=t&&t["stroke-width"]?parseFloat(t["stroke-width"]):.3;return this.svgGraph.append("g").attr("class","sg-grid").attr("transform","translate(0,"+this.height+")").style("opacity",e).style("stroke",i).style("stroke-width",s).call(this.x.gridAxis.tickSize(-this.height).tickFormat("")),this.svgGraph.append("g").attr("class","sg-grid").style("opacity",e).style("stroke",i).style("stroke-width",s).call(this.y.gridAxis.tickSize(-this.width).tickFormat("")),this},t.prototype.removeGrid=function(){return this.svgGraph.selectAll(".sg-grid").remove(),this},t.prototype.removeLegend=function(){return this.svg.selectAll(".sg-legend").remove(),this},t.prototype.drawLegend=function(t,e){this.removeLegend(),t?t.x&&t.y||(t.x||0===t.x||(t.x=void 0!==t[0]&&"number"==typeof t[0]?t[0]:this.width+5),t.y||0===t.y||(t.y=void 0!==t[1]&&"number"==typeof t[1]?t[1]:0)):t={x:0,y:0};var i=(e=e||{}).anchor||"left",s=e.bgstyle||{},r=e.exclude||[];if(r||(r=[]),"string"==typeof r&&(r=r.trim().split(/\s+/)),s.padding){var n="string"==typeof s.padding?s.padding.split(" "):[s.padding];1===n.length?(s["padding-left"]=n[0],s["padding-right"]=n[0],s["padding-top"]=n[0],s["padding-bottom"]=n[0]):2===n.length?(s["padding-left"]=n[1],s["padding-right"]=n[1],s["padding-top"]=n[0],s["padding-bottom"]=n[0]):(n.length>3&&(s["padding-left"]=n[3]),s["padding-right"]=n[1],s["padding-top"]=n[0],s["padding-bottom"]=n[2]),delete s.padding}else s["padding-left"]||(s["padding-left"]=0),s["padding-right"]||(s["padding-right"]=0),s["padding-top"]||(s["padding-top"]=0),s["padding-bottom"]||(s["padding-bottom"]=0);s.fill||(s.fill="#fff",s.opacity=0),s["padding-left"]=parseInt(s["padding-left"]),s["padding-right"]=parseInt(s["padding-right"]),s["padding-top"]=parseInt(s["padding-top"]),s["padding-bottom"]=parseInt(s["padding-bottom"]);var o=this.svg.append("g").attr("class","sg-legend").attr("transform","translate("+t.x+","+t.y+")"),a=o.append("rect").attr("class","sg-legend-bg").attr("x",0).attr("y",0);for(var l in s)l.startsWith("padding")||a.style(l,s[l]);var c=e.itemsPerColumn||0,h=e.rowHeight||24,u=0,p=s["padding-top"],y=s["padding-left"];function f(){u++,c>0&&u>=c?(u=0,p=s["padding-top"],y=o.node().getBBox().width+12):p+=h}var d=this;function g(t,e,i,s){if(s){var r=p+10,n=o.append("path").attr("x",y).attr("y",p).attr("d","M"+y+" "+r+" L"+(18+y)+" "+r);for(var a in d.pointLines[0].style)n.style(a,d.pointLines[0].style[a]);n.style("stroke",d.getColorBySeriesName(t.series))}var l="function"==typeof t.size?t.size():t.size;l>14&&(l=14);var c=y+2,h=p+3;if(e&&e.startsWith("triangle")){var u=1.519676*l,g=u/2,m=.86602*u;switch(c+=7-g,h+=7-.5*m,e){case"triangle-down":o.append("polygon").attr("points","".concat(c,",").concat(h+m," ")+"".concat(c+g,",").concat(h," ")+"".concat(c+u,",").concat(h+m)).style("fill",i);break;case"triangle":case"triangle-up":o.append("polygon").attr("points","".concat(c,",").concat(h," ")+"".concat(c+g,",").concat(h+m," ")+"".concat(c+u,",").concat(h)).style("fill",i)}}else{var x=l/2,v=7-x;c+=v,h+=v,"circle"===e?o.append("circle").attr("cx",c+x).attr("cy",h+x).attr("r",x).style("fill",i):o.append("rect").attr("x",c).attr("y",h).attr("width",l).attr("height",l).attr("transform","square"==e?"":"rotate(45,".concat(c+x,",").concat(h+x,")")).style("fill",i)}o.append("text").attr("x",y+23).attr("y",p+9).attr("dy",".35em").style("text-anchor","start").text(t.series),f()}function m(t,e){var i=p+10,s=o.append("path").attr("x",y).attr("y",p).attr("d","M"+y+" "+i+" L"+(18+y)+" "+i);for(var r in t.style)s.style(r,t.style[r]);"stroke"in t.style||s.style("stroke",e),o.append("text").attr("x",y+23).attr("y",p+9).attr("dy",".35em").style("text-anchor","start").text(t.series),f()}function x(t,e){var i=o.append("rect").attr("x",y).attr("y",p).attr("width",18).attr("height",18);for(var s in t.style)i.style(s,t.style[s]);"fill"in t.style||i.style("fill",e),o.append("text").attr("x",y+23).attr("y",p+9).attr("dy",".35em").style("text-anchor","start").text(t.series),f()}if(this.areas&&!~r.indexOf("areas"))for(var v=[],b=0;b<this.areas.length;b++){var _=this.areas[b].series;if(!~v.indexOf(_)){v.push(_);var w=this.getColorBySeriesName(this.areas[b].series);x(this.areas[b],"function"==typeof w?w(this.areas[b]):w)}}if(this.lines&&!~r.indexOf("lines"))for(var k=[],A=0;A<this.lines.length;A++){var S=this.lines[A].series;if(!~k.indexOf(S)){k.push(S);var L=this.getColorBySeriesName(this.lines[A].series);m(this.lines[A],"function"==typeof L?L(this.lines[A]):L)}}if(this.points&&!~r.indexOf("points"))for(var P=[],G=0;G<this.points.length;G++){var D=this.points[G].series;if(!~P.indexOf(D)){P.push(D);var F=!1;if(this.pointLines)for(var O=this.pointLines.length;O--;)if(this.pointLines[O].series===D){F=!0;break}var z=this.getColorBySeriesName(this.points[G].series);z="function"==typeof z?z(this.points[G]):z,g(this.points[G],this.getPointSeriesShape(D),z,F)}}var B=o.node().getBBox();return a.attr("width",B.width+s["padding-left"]+s["padding-right"]).attr("height",B.height+s["padding-top"]+s["padding-bottom"]),"middle"===(i=i.trim().toLowerCase())?t.x-=.5*B.width:"right"===i&&(t.x-=B.width),o.attr("transform","translate("+t.x+","+t.y+")"),this}}(f),function(t){t.prototype.addPointData=function(t,e,i,s){this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(s=s||{}).size=!s.size||"function"!=typeof s.size&&s.size<=0?s.size=10:s.size,s.y2Axis=!!s.y2Axis,s.shape&&this.setPointSeriesShape(t,s.shape);var r={series:t,x:parseFloat(e),y:parseFloat(i),y2:s.y2Axis,size:s.size,_bind:null,_keys:null};return this.points.push(r),this},t.prototype.addPointsData=function(t,e,i,s,r){var n=this;return t&&0!==t.length?(this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(r=r||{}).size=!r.size||"function"!=typeof r.size&&r.size<=0?r.size=10:r.size,r.y2Axis=!!r.y2Axis,r.additionalDataKeys=r.additionalDataKeys||null,t.forEach((function(t,o){var a=!r.forceSeriesName&&e in t&&t[e],l=a?t[e]:e||0===e?e:o,c=t[i],h=t[s];r.shape&&(n.ptSeriesShapes[l]=r.shape);var u={series:l,x:c,y:parseFloat(h),y2:r.y2Axis,size:r.size,_bind:t,_keys:{x:i,y:s,additional:null}};if(a&&(u._keys.series=e),r.additionalDataKeys&&Array.isArray(r.additionalDataKeys)){var p=[];r.additionalDataKeys.forEach((function(e){for(var i=e,s=1;i in u;)i=e+String(++s);p.push({key:e,name:i}),u[i]=t[e]})),u._keys.additional=p}n.points.push(u)})),this):this},t.prototype.addPointsDataAsArray=function(t,e,i){if(!e||0===e.length)return this;this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(i=i||{}).size=!i.size||"function"!=typeof i.size&&i.size<=0?i.size=10:i.size,i.y2Axis=!!i.y2Axis,i.showNulls=!!i.showNulls,i.shape&&this.setPointSeriesShape(t,i.shape);var s=this;return e.forEach((function(e){var r={series:t,x:parseFloat(e[0]),y:parseFloat(e[1]),y2:i.y2Axis,size:i.size,_bind:e,_keys:{x:0,y:1,additional:null}};if(isNaN(r.y)||!r.y&&0!==r.y){if(!showNulls)return;r.y=0,r.wasNull=!0}s.points.push(r)})),this},t.prototype.clearPointsData=function(t){return this.points=null==t?null:this.points.filter((function(e){return e.series!==t})),this},t.prototype._getPointData=function(t,e){if(!this.points)return[];var i=this.points.filter((function(e){return e.series===t}));if(!i||!i.length)return this;if(e||0===e){for(;e<0;)e=i.length+e;i=[i[e]]}return i},t.prototype._clonePointData=function(t){return{series:t.series,x:t.x,y:t.y,y2:t.y2,size:t.size}},t.prototype.getPointsDataBySeries=function(t){var e=this;return this._getPointData(t).map((function(t){return e._clonePointData(t)}))},t.prototype.getPointCoordinatesBySeries=function(t){return this._getPointData.map((function(t){return[t.x,t.y||0===t.y?t.y:t.y2]}))},t.prototype.getPointSeriesShape=function(t){return this.ptSeriesShapes=this.ptSeriesShapes||{},this.ptSeriesShapes[t]},t.prototype.setPointSeriesShape=function(t,e){return this.ptSeriesShapes=this.ptSeriesShapes||{},this.ptSeriesShapes[t]=~a.indexOf(e)?e:null,this},t.prototype.updatePointsData=function(t,e,i){return this._getPointData(t,e).forEach((function(t){["x","y","y2","size"].forEach((function(e){e in i&&null!==i[e]&&void 0!==l(i[e])&&(t[e]=i[e],t._keys&&delete t._keys[e])}))})),this._syncPointLinesData(),this},t.prototype.syncPointsData=function(){return this.points?(this.points.forEach((function(t){t._bind&&t._keys&&("series"in t._keys&&t._bind[t._keys.series],"x"in t._keys&&(t.x=parseFloat(t._bind[t._keys.x])),"y"in t._keys&&(t.y=parseFloat(t._bind[t._keys.y])),t._keys.additional&&t._keys.additional.forEach((function(e){return t[e.name]=t._bind[e.key]})))})),this._syncPointLines(),this):this}}(f),function(t,e){t.prototype.addAreaAsCoordinates=function(t,i,s){if(!i||!Array.isArray(i)||i.length<2)return this;var r={};if((s=s||{}).style)for(var n in s.style)r[n]=s.style;return this.areas=this.areas||[],this.areas.push({series:t,functions:null,coords:i,resolution:null,xRange:null,y2:!!s.y2Axis,style:s.style||{},interpolate:s.interpolation||e.curveLinear,_bind:{coords:i,style:r}}),this},t.prototype.addAreaBetweenTwoLines=function(t,i,s,r,n){if(!s||"function"!=typeof s)return this;if(!i||"function"!=typeof i)return this;var o={};if((n=n||{}).style)for(var a in n.style)o[a]=n.style;return this.areas=this.areas||[],this.areas.push({series:t,functions:[i,s],coords:null,xRange:r?c(r):null,y2:!!n.y2Axis,style:n.style||{},interpolate:n.interpolation||e.curveLinear,_bind:{xRange:r,style:o}}),this},t.prototype._getAreaData=function(t,e){if(!this.areas)return[];var i=this.areas.filter((function(e){return e.series===t}));if(!i||!i.length)return this;if(e||0===e){for(;e<0;)e=i.length+e;i=[i[e]]}return i},t.prototype._cloneAreaData=function(t){return{series:t.series,functions:t.functions?c(t.functions):null,coords:t.coords?t.coords.map((function(t){return c(t)})):null,xRange:t.xRange?c(t.xRange):null,y2:t.y2,style:t.style,interpolate:t.interpolate}},t.prototype.getAreasDataBySeries=function(t,e){var i=this;return this._getAreaData(t,e).map((function(t){return i._cloneAreaData(t)}))},t.prototype.updateAreaData=function(t,e,i){return this._getAreaData(t,e).forEach((function(t){if(i.lineFunctionTop||i.functionTop||i.lineFunctionBottom||i.functionBottom)t.functions=[i.lineFunctionBottom||i.functionBottom||t.functions&&t.functions[0],i.lineFunctionTop||i.functionTop||t.functions&&t.functions[1]],t.functions[0]||(t.functions[0]=function(t){return 0}),t.functions[1]||(t.functions[1]=function(t){return 0}),i.xRange&&(t.xRange=c(i.xRange),t._bind&&(t._bind.xRange=i.xRange)),t.coords=null,t._bind&&delete t._bind.coords;else if(i.coordinates||i.coords){var e=i.coordinates||i.coords;t.coords=c(e),t.functions=null,t._bind&&(t._bind.coords=e,delete t._bind.xRange)}if(t.interpolate=i.interpolate||t.interpolate,i.style){for(var s in t.style={},i.style)t.style[s]=i.style[s];t._bind&&(t._bind.style=i.style)}})),this},t.prototype.clearAreasData=function(t){return this.areas=null==t?null:this.areas.filter((function(e){return e.series!==t})),this},t.prototype.syncAreasData=function(){return this.areas?(this.areas.forEach((function(t){if(t._bind.xRange&&(t.xRange=c(t._bind.xRange)),t._bind.coords&&(t.coords=t._bind.coords.map((function(t){return c(t)}))),t._bind.style)for(var e in t.style={},update.style)t.style[e]=update.style[e]})),this):this}}(f,o),function(t,e){t.prototype.addLineDataAsCoordinates=function(t,i,s){if(!i||0===i.length)return this;this.lines=this.lines||[];var r={};if((s=s||{}).style)for(var n in s.style)r[n]=s.style;return r["stroke-width"]&&"number"==typeof r["stroke-width"]||(r["stroke-width"]=1.5),this.lines.push({series:t,lineFunction:null,coords:i.map((function(t){return u(t)})),xRange:null,y2:!!s.y2Axis,style:r,interpolate:s.interpolation||e.curveLinear,_bind:{coords:i,style:r}}),this},t.prototype.addLineDataAsFunction=function(t,i,s,r){if(!i||"function"!=typeof i||"number"!=typeof i(0))return this;this.lines=this.lines||[];var n=(r=r||{}).style||{};if(r.style)for(var o in r.style)n[o]=r.style;n["stroke-width"]&&"number"==typeof n["stroke-width"]||(n["stroke-width"]=1.5);var a=a||e.curveLinear;return this.lines.push({series:t,lineFunction:i,coords:null,xRange:s?u(s):null,y2:!!r.y2Axis,style:n,interpolate:r.interpolation||e.curveLinear,_bind:{xRange:s,style:n}}),this},t.prototype.addLinesDataFromPoints=function(t,i){if(!this.points||0===this.points.length)return this;var s=(i=i||{}).handleOverlap?i.handleOverlap.toLowerCase():"average",r={};if(i.style)for(var n in i.style)r[n]=i.style;r["stroke-width"]&&"number"==typeof r["stroke-width"]||(r["stroke-width"]=1.5),r.stroke&&delete r.stroke;for(var o={},a=0;a<this.points.length;a++){var l=this.points[a].series;l in o?(o[l].y2=this.points[a].y2,o[l].points.push(this.points[a])):o[l]={points:[this.points[a]]}}var c=function(t){return!0};for(var h in t&&("function"==typeof t?c=t:"string"==typeof t?c=function(e){return e===t}:Array.isArray(t)&&(c=function(e){return~t.indexOf(e)})),this.pointLines=[],o)if(c(h)&&!(o[h].points.length<2)){var u=this._getPointLine(o[h].points,s);u.length>=2&&this.pointLines.push({series:h,lineFunction:null,resolution:null,coords:u,xRange:null,y2:o[h].y2,style:r,interpolate:i.interpolation||e.curveLinear,bind:{style:r}})}return this},t.prototype._getPointLine=function(t,e){t.sort((function(t,e){return t.x-e.x}));for(var i=[],s=0;s<t.length;++s){for(var r=t[s],n=[r.y],o=[r.x,r.y],a=!1;s+1<t.length&&(r=t[s+1]).x===o[0];)a=!0,n.push(r.y),++s;if(a)if(~["mean","average"].indexOf(e))o[1]=n.reduce((function(t,e){return t+e}));else switch(n.sort(),e){case"lowest":case"min":o[1]=n[0];break;case"highest":case"max":o[1]=n[n.length-1];break;case"median":o[1]=n[Math.floor(.5*n.length)];break;default:throw"Unknown handle overlap operation: ".concat(e)}i.push(o)}return i},t.prototype.clearLinesData=function(t){return this.lines=null==t?null:this.lines.filter((function(e){return e.series!==t})),this},t.prototype.clearPointLinesData=function(t){return this.pointLines=null==t?null:pointLines.lines.filter((function(e){return e.series!==t})),this},t.prototype._getLineData=function(t,e){if(!this.lines)return[];var i=this.lines.filter((function(e){return e.series===t}));if(!i||!i.length)return[];if(e||0===e){for(;e<0;)e=i.length+e;i=[i[e]]}return i},t.prototype._cloneLineData=function(t){return{series:t.series,lineFunction:t.lineFunction,coords:t.coords?t.coords.map((function(t){return u(t)})):null,xRange:t.xRange?u(t.xRange):null,y2:t.y2,style:t.style,interpolate:t.interpolate}},t.prototype.getLinesDataBySeries=function(t,e){var i=this;return this._getLineData(t,e).map((function(t){return i._cloneLineData(t)}))},t.prototype.updateLinesData=function(t,e,i){return this._getLineData(t,e).forEach((function(t){if(i.lineFunction||i.function)t.lineFunction=i.lineFunction||i.function||t.lineFunction,i.xRange&&(t.xRange=u(i.xRange),t._bind&&(t._bind.xRange=i.xRange)),t.coords=null,t._bind&&delete t._bind.coords;else if(i.coordinates||i.coords){var e=i.coordinates||i.coords;t.coords=u(e),t._bind&&(t._bind.coords=e,delete t._bind.xRange)}if(t.interpolate=i.interpolate||t.interpolate,i.style){for(var s in t.style={},i.style)t.style[s]=i.style[s];t.style["stroke-width"]&&"number"==typeof t.style["stroke-width"]||(t.style["stroke-width"]=1.5),t._bind&&(t._bind.style=i.style)}})),this},t.prototype.syncLinesData=function(){return this.lines?(this.lines.forEach((function(t){if(t._bind.xRange&&(t.xRange=u(t._bind.xRange)),t._bind.coords&&(t.coords=t._bind.coords.map((function(t){return u(t)}))),t._bind.style){for(var e in t.style={},t._bind.style)t.style[e]=t._bind.style[e];t.style["stroke-width"]&&"number"==typeof t.style["stroke-width"]||(t.style["stroke-width"]=1.5)}})),this):this},t.prototype._syncPointLines=function(){var t=this;if(this.pointLines){var e={};this.points.forEach((function(s){var r=s.series;r in e?e[r].push(t.points[i]):e[r]=[t.points[i]]})),this.pointLines=this.pointLines.filter((function(i){if(!(i.series in e))return!1;if(i.coords=t._getPointLine(e[i.series]),i._bind.style){for(var s in i.style={},i._bind.style)i.style[s]=i._bind.style[s];i.style["stroke-width"]&&"number"==typeof i.style["stroke-width"]||(i.style["stroke-width"]=1.5)}return!0}))}}}(f,o),function(t){t.prototype._findIntercept=function(t,e,i,s){var r,n=t(e),o=t(i),a=s?this.y2:this.y;if(n<a.min!=o<a.min)r=a.min;else{if(n>a.max==o>a.max)return null;r=a.max}var l,c,h,u,p,y=e+.5*(i-e),f=.25*Math.abs(i-e),d=n,g=e;e-=1e-5,i+=1e-5;for(var m=0;m++<100;){if(l=t(y),c=Math.abs(l-r),y>=this.x.min&&y<=this.x.max&&c<1e-6)return[y,r];if(m>0&&u<c?(y=g,l=d,f*=.5):((h=l>r!=(y>g==l>d))!==p&&(f*=.5),g=y,d=l,p=h,u=c),(y+=p?f:-f)<e||y>i)return null}return null},t.prototype._getLineSegmentsFromCoordinates=function(t,e){for(var i=e?this.y2:this.y,s=[],r=[],n=null,o=!1,a=!1,l=0;l<t.length;l++){var c=t[l];if(void 0!==c[1]&&null!==c[1]){var h=n?(t[l][1]-n[1])/(t[l][0]-n[0]):0;if(o){if(!a&&c[0]>=this.x.max&&(a=!0,c[0]>this.x.max)){if(!n)break;c=[this.x.max,n[0]+h*(c[1]-n[1])]}if(c[1]>=i.min&&c[1]<=i.max){if(0===r.length&&n&&0!==h){var u=h>0?i.min:i.max;c=[(this.x.isDate?n[0].getTime():n[0])+(u-n[1])/h,u],this.x.isDate&&(c[0]=new Date(c[0])),l--}r.push(c)}else r.length>0&&(u=h>0?i.max:i.min,c=[(this.x.isDate?n[0].getTime():n[0])+(u-n[1])/h,u],this.x.isDate&&(c[0]=new Date(c[0])),r.push(c)),r.length>1&&(s.push(r),r=[]);if(a)break;n=c}else{if(c[0]>=this.x.min){if(o=!0,c[0]>this.x.min&&n){var p=[this.x.min,n[0]+h*(c[1]-n[1])];p[1]>=i.min&&p[1]<=i.max&&r.push(p)}c[1]>=i.min&&c[1]<=i.max&&r.push(c)}n=c}}else r.length>1&&s.push(r),r=[],n=null}return r.length>1&&s.push(r),s},t.prototype._getLineSegmentsFromFunction=function(t,e,i,s,r){var n;if(i?(i[0]<this.x.min&&(i[0]=this.x.min),i[1]>this.x.max&&(i[0]=this.x.max)):i=[this.x.min,this.x.max],e&&"number"==typeof e||(e=Math.floor((this.width-this.margins.left-this.margins.right)/10)),e<2&&(e=2),this.x.isLog){var o=Math.pow(i[1]/i[0],1-e);n=function(t){return(t*=o)>i[1]?i[1]:t}}else{var a=(i[1]-i[0])/(e-1),l=this.x.isDate;n=function(t){return l?new DateUTC(t.getTime()+a):t+a}}for(var c=[],h=[],u=i[0],p=u,y=s?this.y2:this.y;;){var f=!1;(u>=i[1]||isNaN(u))&&(u=i[1],f=!0);var d=t(u);if(r){var g;if(d>=y.min&&d<=y.max)0===h.length&&u>i[0]&&(g=this._findIntercept(t,p,u,s))&&h.push(g),h.push([u,d]);else h.length>0&&(g=this._findIntercept(t,p,u,s))&&h.push(g),h.length>1&&(c.push(h),h=[]);if(p=u,u=n(u),f)break}else h.push([u,d])}return h.length>1&&c.push(h),c},t.prototype._getAreaPolysFromCoordinates=function(t,e){for(var i=[],s=[],r=0;r<t.length;r++)i.push([t[r][0],t[r][1]]),s.push([t[r][0],t[r][2]]);return this._getAreaPolysFromLineCrosswalk(this._getLineSegmentsFromCoordinates(i,e),this._getLineSegmentsFromCoordinates(s,e),e)},t.prototype._getAreasPolysFromFunctions=function(t,e,i,s,r,n){return this._getLineSegmentsFromFunction(t,i,s,r,n),this._getLineSegmentsFromFunction(e,i,s,r,n),this._getAreaPolysFromLineCrosswalk(this._getLineSegmentsFromFunction(t,i,s,r,n),this._getLineSegmentsFromFunction(e,i,s,r,n),r)},t.prototype._getAreaPolysFromLineCrosswalk=function(t,e,i){for(var s,r,n=[],o=[],a=[0,0],l=[0,0],c=[!1,!1],h=[!1,!1];;){s=c[0]?null:t[a[0]][l[0]],r=c[1]?null:e[a[1]][l[1]];var u=[!1,!1];if(!s&&!r)break;s&&r?s[0]===r[0]?(o.push([s[0],s[1],r[1]]),u[0]=u[1]=!0):(s[0]<r[0]?u[0]=!0:u[1]=!0,o.length>=2&&n.push(o),o=[]):(u=[!0,!0],o.length>=2&&n.push(o),o=[]);for(var p=[!1,!1],y=0;y<2;y++)if(!c[y]){var f=0===y?t:e;u[y]&&(l[y]+=1),h[y]=l[y]>=f[a[y]].length,h[y]&&(a[y]+=1,l[y]=0,p[y]=!0,c[y]=a[y]>=f.length)}if(p[0]&&p[1]&&(o.length>=2&&n.push(o),o=[]),c[0]&&c[1]){o.length>=2&&n.push(o);break}}return n}}(f),function(t,e){t.prototype.removePoints=function(){return this.svgGraph.selectAll(".sg-point").remove(),this},t.prototype.drawPoints=function(t,e){var i=this;if(this.removePoints(),!this.points||0===this.points.length)return this;var s=this.points;if(this.allowDrawBeyondGraph||(s=s.filter((function(e){if(!e.x&&0!==e.x||Number.isNaN(e.x))return!1;if(e.x<i.x.min||e.x>i.x.max)return!1;if(i.x.break&&e.x>i.x.break.domain[0]&&e.x<i.x.break.domain[1])return!1;if(!t&&isNaN(e.y))return!1;var s=e.y2?i.y2:i.y;return!(e.y<s.min||e.y>s.max||s.break&&e.y>s.break.domain[0]&&e.y<s.break.domain[1])}))),!s.length)return this;var r={};for(var n in s.forEach((function(t){t.series in r?r[t.series].push(t):r[t.series]=[t]})),r)this._drawPoints(this.svgGraph.selectAll(".sg-temporary-point").data(r[n]).enter(),this.ptSeriesShapes[n],e);return this},t.prototype.drawUpdatePoints=function(t,i){var s=this;if(!this.points||0===this.points.length)return this.removePoints(),this.removePointLines(),this;i&&(Object.getPrototypeOf(i)!==Object.prototype&&(i={}),i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut);var r=this.points;this.allowDrawBeyondGraph||(r=r.filter((function(e){if(!e.x&&0!==e.x||Number.isNaN(e.x))return!1;if(e.x<s.x.min||e.x>s.x.max)return!1;if(s.x.break&&e.x>s.x.break.domain[0]&&e.x<s.x.break.domain[1])return!1;if(!t&&isNaN(e.y))return!1;var i=e.y2?s.y2:s.y;return!(e.y<i.min||e.y>i.max||i.break&&e.y>i.break.domain[0]&&e.y<i.break.domain[1])})));var n={};r.forEach((function(t){t.series in n?n[t.series].push(t):n[t.series]=[t]}));var o=function(t){var e;l=n[t],c=s.ptSeriesShapes[t],(h=s.svgGraph.selectAll(".sg-point").filter((function(e){return e.series===t}))).filter((function(t){return!~l.indexOf(t)})).remove(),h=h.filter((function(t){return~l.indexOf(t)})),u=function(t){if(Array.isArray(t))return y(t)}(e=l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h.each((function(t){var e=u.indexOf(t);~e&&u.splice(e,1)})),s._drawPoints(s.svgGraph.selectAll(".sg-temporary-point").data(u).enter(),c,i),s._updatePoints(h,c,i)};for(var a in n){var l,c,h,u;o(a)}return this},t.prototype._drawPoints=function(t,i,s){if(t.size()){var r;switch(i){case"triangle":case"triangle-up":case"triangle-down":r=t.append("polygon");break;case"square":case"diamond":r=t.append("rect");break;default:r=t.append("circle")}r=this._formatPoint(r,i,s),s&&(Object.getPrototypeOf(s)!==Object.prototype&&(s={}),s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,r.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}},t.prototype._updatePoints=function(t,i,s){t.size()&&(s&&(Object.getPrototypeOf(s)!==Object.prototype&&(s={}),s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,t=t.transition().duration(s.duration).ease(s.ease)),this._formatPoint(t,i))},t.prototype._formatPoint=function(t,e,i){var s=this;switch(e){case"triangle-down":t.attr("series",(function(t){return t.series})).style("opacity",i?0:1).attr("class","sg-point sg-point-td").attr("points",(function(t){var e=e="function"==typeof t.size?t.size():t.size,i=1.519676*e,r=.86602*i*.5,n=.5*i,o=s.x.scale(t.x),a=isNaN(t.y)?0:t.y;return a=(t.y2?s.y2.scale:s.y.scale)(a),"".concat(o-n,",").concat(a+r," ").concat(o,",").concat(a-r," ").concat(o+n,",").concat(a+r)}));break;case"triangle":case"triangle-up":t.attr("series",(function(t){return t.series})).style("opacity",i?0:1).attr("class","sg-point sg-point-tu").attr("points",(function(t){var e=e="function"==typeof t.size?t.size(t,t._bind):t.size,i=1.519676*e,r=.86602*i*.5,n=.5*i,o=s.x.scale(t.x),a=isNaN(t.y)?0:t.y;return a=(t.y2?s.y2.scale:s.y.scale)(a),"".concat(o-n,",").concat(a-r," ").concat(o,",").concat(a+r," ").concat(o+n,",").concat(a-r)}));break;case"square":case"diamond":t.attr("series",(function(t){return t.series})).style("opacity",i?0:1).attr("class","sg-point sg-point-sd").attr("width",(function(t){return"function"==typeof t.size?t.size():t.size})).attr("height",(function(t){return"function"==typeof t.size?t.size():t.size})).attr("x",(function(t){var e="function"==typeof t.size?t.size():t.size;return s.x.scale(t.x)-e/2})).attr("y",(function(t){isNaN(t.y)||t.y;var e="function"==typeof t.size?t.size():t.size;return(t.y2?s.y2.scale:s.y.scale)(t.y)-e/2})).attr("transform",(function(t){if("diamond"!==e)return"";var i=isNaN(t.y)?0:t.y;return"rotate(45,".concat(s.x.scale(t.x),",").concat((t.y2?s.y2.scale:s.y.scale)(i),")")}));break;default:t.style("opacity",i?0:1).attr("series",(function(t){return t.series})).attr("class","sg-point sg-point-cr").attr("r",(function(t){return.5*("function"==typeof t.size?t.size(t):t.size)})).attr("cx",(function(t){return s.x.scale(t.x)})).attr("cy",(function(t){var e=isNaN(t.y)?0:t.y;return(t.y2?s.y2.scale:s.y.scale)(e)}))}return t.style("fill",(function(t){var e=s.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=s.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})),t}}(f,o),function(t,e){t.prototype.removeAllLines=function(){return this.removeLines().removePointLines()},t.prototype.removeLines=function(){return this.svgGraph.selectAll(".sg-line").remove(),this.lines&&this.lines.forEach((function(t){t._segments=null,t._d3s=null})),this},t.prototype.removePointLines=function(){return this.svgGraph.selectAll(".sg-point-line").remove(),this.pointLines&&this.pointLines.forEach((function(t){t._segments=null,t._d3s=null})),this},t.prototype.drawAllLines=function(t,e){return this.drawPointLines().drawLines(t,e)},t.prototype.drawLines=function(t,e){if(this.removeLines(),t||0===t?t<=2&&(t=2):t=20,!this.lines)return this;var i=this;return this.lines.forEach((function(e){e.lineFunction?e._segments=i._getLineSegmentsFromFunction(e.lineFunction,t,e.xRange,e.y2Axis,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?e._segments=[e.coords]:e._segments=i._getLineSegmentsFromCoordinates(e.coords,e.y2),e._segments&&(e._segments=e._segments.filter((function(t){return t&&t.length>=2})))})),this._drawLines(this.lines,"sg-line"),this},t.prototype.drawPointLines=function(t){if(this.removePointLines(),!this.pointLines)return this;var e=this;return this.pointLines.forEach((function(t){e.allowDrawBeyondGraph?t._segments=[t.coords]:t._segments=e._getLineSegmentsFromCoordinates(t.coords,t.y2),t._segments&&(t._segments=t._segments.filter((function(t){return t&&t.length>=2})))})),this._drawLines(this.pointLines,"sg-point-line",t),this},t.prototype.drawUpdateAllLines=function(t,e){return this.drawUpdateLines(t,e).drawUpdatePointLines(e)},t.prototype.drawUpdateLines=function(t,i){t||0===t?t<=2&&(t=2):t=20,i&&(Object.getPrototypeOf(i)!==Object.prototype&&(i={}),i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut);var s=this;return this.lines.forEach((function(e){e.lineFunction?e._segments=s._getLineSegmentsFromFunction(e.lineFunction,t,e.xRange,e.y2Axis,!s.allowDrawBeyondGraph):s.allowDrawBeyondGraph?e._segments=[e.coords]:e._segments=s._getLineSegmentsFromCoordinates(e.coords,e.y2),e._segments&&(e._segments=e._segments.filter((function(t){return t&&t.length>=2})))})),s._updateLines(this.lines,"sg-line",i),this},t.prototype.drawUpdatePointLines=function(t){t&&(Object.getPrototypeOf(t)!==Object.prototype&&(t={}),t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut);var i=this;return this.pointLines.forEach((function(t){i.allowDrawBeyondGraph?t._segments=[t.coords]:t._segments=i._getLineSegmentsFromCoordinates(t.coords,t.y2),t._segments&&(t._segments=t._segments.filter((function(t){return t&&t.length>=2})))})),i._updateLines(this.pointLines,"sg-point-line",t),this},t.prototype._drawLines=function(t,i,s){var r=this,n=this,o=this.svgGraph.selectAll(".sg-temporary-line").data(t).enter().append("path").attr("series",(function(t){return t.series})).attr("class",i).style("opacity",s?0:1).style("fill","none").attr("d",(function(t){var i=t.y2?r.y2:r.y,s=e.line().x((function(t){return r.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),r=t.style||{};for(var o in r)(!s||o&&"opacity"!=o.toLowerCase())&&i.style(o,r[o]);if(!("stroke"in r)){var a=n.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof a?a(t):a)}t._d3s=i}));s&&(Object.getPrototypeOf(s)!==Object.prototype&&(s={}),s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,o.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))},t.prototype._updateLines=function(t,i,s){var r=this;if(!t)return this;var n=t.filter((function(t){return t._segments&&t._segments.length&&!t._segments.filter((function(t){return t.length<2})).length?!t._d3s:(segments._d3s&&(t._d3s.remove(),t._d3s=null),!1)})),o=this.svgGraph.selectAll("."+i);s&&(o=o.transition().duration(s.duration).ease(s.ease));var a=this;o.attr("d",(function(t){var i=t.y2?r.y2:r.y,s=e.line().x((function(t){return r.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),s=t.style||{};for(var r in s)i.style(r,s[r]);if(!("stroke"in s)){var n=a.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof n?n(t):n)}}));var l=this.svgGraph.selectAll(".sg-temporary-line").data(n).enter().append("path").attr("series",(function(t){return t.series})).attr("class",i).style("opacity",s?0:1).style("fill","none").attr("d",(function(t){var i=t.y2?a.y2:a.y,s=e.line().x((function(t){return a.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),r=t.style||{};for(var n in r)(!s||n&&"opacity"!=n.toLowerCase())&&i.style(n,r[n]);if(!("stroke"in r)){var o=a.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof o?o(t):o)}t._d3s=i}));s&&(s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,l.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}}(f,o),function(t,e){t.prototype.removeAreas=function(){return this.svgGraph.selectAll(".sg-area").remove(),this},t.prototype.drawAreas=function(t,e){var i=this;return this.removeAreas(),t||0===t?t<=2&&(t=2):t=20,this.areas?(this.areas.forEach((function(t){t.functions?t._parts=i._getAreasPolysFromFunctions(t.functions[0],t.functions[1],t.resolution,t.xRange,t.y2,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?t._parts=[t.coords]:t._parts=i._getAreaPolysFromCoordinates(t.coords,t.y2),t._parts&&(t._parts=t._parts.filter((function(t){return t&&t.length>=2})))})),this._drawAreas(t,e),this):this},t.prototype.drawUpdateAreas=function(t,e){var i=this;return t||0===t?t<=2&&(t=2):t=20,this.areas.forEach((function(t){t.functions?t._parts=i._getAreasPolysFromFunctions(t.functions[0],t.functions[1],t.resolution,t.xRange,t.y2,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?t._parts=[t.coords]:t._parts=i._getAreaPolysFromCoordinates(t.coords,t.y2),t._parts&&(t._parts=t._parts.filter((function(t){return t&&t.length>=2})))})),this._updateAreas(e),this},t.prototype._drawAreas=function(t,i){var s=this;if(this.areas){var r=this,n=this.svgGraph.selectAll(".sg-temporary-area").data(this.areas).enter().append("path").attr("series",(function(t){return t.series})).attr("class","sg-area").style("opacity",i?0:1).attr("d",(function(t){var i=t.y2?s.y2:s.y,r=e.area().x((function(t){return s.x.scale(t[0])})).y0((function(t){return i.scale(t[1])})).y1((function(t){return i.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(t){var s=e.select(this),n=t.style||{};for(var o in n)(!i||o&&"opacity"!=o.toLowerCase())&&s.style(o,n[o]);if(!("fill"in n)){var a=r.getColorBySeriesName(t.series,!0);s.style("fill","function"==typeof a?a(t):a)}t._d3s=s}));i&&(Object.getPrototypeOf(i)!==Object.prototype&&(i={}),i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut,n.transition().duration(i.duration).ease(i.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}},t.prototype._updateAreas=function(t){var i=this;if(this.areas){t&&(Object.getPrototypeOf(t)!==Object.prototype&&(t={}),t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut);var s=this.areas.filter((function(t){return t._parts&&t._parts.length&&!t._parts.filter((function(t){return t.length<2})).length?!t._d3s:(segments._d3s&&(t._d3s.remove(),t._d3s=null),!1)})),r=this.svgGraph.selectAll(".sg-area");t&&(r=r.transition().duration(t.duration).ease(t.ease));var n=this;r.attr("d",(function(t){var s=t.y2?i.y2:i.y,r=e.area().x((function(t){return i.x.scale(t[0])})).y0((function(t){return s.scale(t[1])})).y1((function(t){return s.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(t){var i=e.select(this),s=t.style||{};for(var r in s)i.style(r,s[r]);if(!("fill"in s)){var o=n.getColorBySeriesName(t.series,!0);i.style("fill","function"==typeof o?o(t):o)}}));var o=this.svgGraph.selectAll(".sg-temporary-area").data(s).enter().append("path").attr("series",(function(t){return t.series})).attr("class","sg-area").style("opacity",t?0:1).attr("d",(function(t){var s=t.y2?i.y2:i.y,r=e.area().x((function(t){return i.x.scale(t[0])})).y0((function(t){return s.scale(t[1])})).y1((function(t){return s.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(i){var s=e.select(this),r=i.style||{};for(var o in r)(!t||o&&"opacity"!=o.toLowerCase())&&s.style(o,r[o]);if(!("fill"in r)){var a=n.getColorBySeriesName(i.series,!0);s.style("fill","function"==typeof a?a(i):a)}i._d3s=s}));t&&(t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut,o.transition().duration(t.duration).ease(t.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}}}(f,o),function(t,e){t.prototype.addTooltipToPoints=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-point").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype.addTooltipToLines=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-line").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype.addTooltipToAreas=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-area").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype._constructTooltipFunctionality=function(t,i){var s=this.svgGraph.node();return function(r){if(!r)return null;i||(i={});var n,o=e.select("body"),a=i.offset||[15,15],l=r._groups[0];r.on("mouseover.sg-tooltip",(function(t,r){var c,h=e.pointer(t,o.node());for(var u in n?c={left:h[0]+a[0]+"px",top:h[1]+a[1]+"px"}:(o.selectAll(".sg-tooltip").remove(),(n=o.append("div")).attr("class","sg-tooltip"),c={position:"absolute",left:h[0]+a[0]+"px",top:h[1]+a[1]+"px","z-index":1001,"background-color":"#fff",border:"1px solid #777","border-radius":"4px",padding:"4px 6px","font-family":"'Century Gothic', CenturyGothic, Geneva, AppleGothic, sans-serif","font-size":"12px"}),c)n.style(u,c[u]);if(i.style)for(var p in i.style)n.style(p,i.style[p]);i.mouseover&&i.mouseover(r,e.pointer(t,s),l)})).on("mousemove.sg-tooltip",(function(i,r){if(n){var c=e.pointer(i,o.node());n.style("left",c[0]+a[0]+"px").style("top",c[1]+a[1]+"px");var h=null;t&&(h=t(r,e.pointer(i,s),l)),h?n.html(h):(n.remove(),n=null)}})).on("mouseout.sg-tooltip",(function(t,r){i.mouseout&&i.mouseout(r,e.pointer(t,s),l),n&&(n.remove(),n=null)}))}},t.prototype.highlightPoints=function(t,e,i,s,r){var n=".sg-point";t&&(n+="[series='"+t+"']");var o=this;return this.svgGraph.selectAll(n).each((function(t,n,a){if(!e||e(t)){var l=o.x.scale,c=t.y2?o.y2.scale:o.y.scale;i||(i=t.wasNull?0:"function"==typeof t.pointsize?t.pointsize():t.pointsize),s||(s=t.wasNull?"none":o.getColorBySeriesName(t.series,!0));var h=i||t.pointsize;"function"==typeof h&&(h=h.call(t));var u=o.svgGraph.append("rect").attr("class","sg-point-highlight").attr("width",h).attr("height",h).attr("x",l(t.x)-h/2).attr("y",c(t.y)-h/2).attr("transform","rotate(45,"+l(t.x)+","+c(t.y)+")").style("fill",s);if(r)for(var p in r)u.style(p,r[p])}})),this},t.prototype.removeHighlightPoints=function(){return this.svgGraph.selectAll(".sg-point-highlight").remove(),this},t.prototype.removeHighlights=function(){return this.removeHighlightPoints(),this}}(f,o),function(t,e){t.prototype.removeHighlights=function(){return this.removeHighlightPoints().removeHighlightLines().removeHighlightAreas()},t.prototype.removeHighlightPoints=function(){return this.svgGraph.selectAll(".sg-point-highlight").remove(),this.svgGraph.selectAll(".sg-point.sg-highlight-hide").style("visibility","").classed("sg-highlight-hide",!1),this},t.prototype.removeHighlightLines=function(){return this.svgGraph.selectAll(".sg-line-highlight").remove(),this.svgGraph.selectAll(".sg-line.sg-highlight-hide").style("visibility","").classed("sg-highlight-hide",!1),this},t.prototype.removeHighlightAreas=function(){return this.svgGraph.selectAll(".sg-area-highlight").remove(),this.svgGraph.selectAll(".sg-area.sg-highlight-hide").style("opacity","").classed("sg-highlight-hide",!1),this},t.prototype._addBlurDefn=function(){this.svgDefs.select("#sg-effect-blur").empty()&&this.svgDefs.append("filter").attr("id","sg-effect-blur").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",6)},t.prototype.highlightPoints=function(t){var i=this;return(t=t||{}).series&&(t.series=Array.isArray(t.series)?t.series:[t.series]),this.svgGraph.selectAll(".sg-point").each((function(s,r,n){if((!t.series||~t.series.indexOf(s.series))&&(!t.filter||t.filter(i._clonePointData(s),n[r]))){var o=e(n[r].node().cloneNode(!0)).attr("class","sg-point-highlight"),a=i.x.scale,l=s.y2?i.y2.scale:i.y.scale,c=a(s.x),h=l(isNaN(s.y)?0:s.y),u=t.size||s.size;switch("function"==typeof u&&(u=u.call(s)),i.ptSeriesShapes[series]){case"triangle":case"triangle-up":u*=2,o.attr("points",(function(t){var e=1.519676*u,i=.86602*e*.5,s=.5*e;return"".concat(c-s,",").concat(h-i," ").concat(c,",").concat(h+i," ").concat(c+s,",").concat(h-i)}));break;case"triangle-down":u*=2,o.attr("points",(function(t){var e=1.519676*u,i=.86602*e*.5,s=.5*e;return"".concat(c-s,",").concat(h+i," ").concat(c,",").concat(h-i," ").concat(c+s,",").concat(h+i)}));break;case"square":case"diamond":o.attr("width",u).attr("height",u).attr("x",c-u/2).attr("y",h-u/2);break;default:o.attr("r",u)}if(i.svgGraph.append(o),t.style)for(var p in t.style)o.style(p,t.style[p]);n[r].classed("sg-highlight-hide",!0).style("opacity","0")}})),this},t.prototype.highlightLines=function(t){var i=this;return(t=t||{}).series&&(t.series=Array.isArray(t.series)?t.series:[t.series]),this._addBlurDefn(),this.svgGraph.selectAll(".sg-line").each((function(s,r,n){if((!t.series||~t.series.indexOf(s.series))&&(!t.filter||t.filter(i._cloneLineData(s),n[r]))){var o=e(n[r].node().cloneNode(!0)).attr("class","sg-point-highlight"),a=null;if(t.noblur||(a=e(n[r].node().cloneNode(!0)).attr("class","sg-line-highlight").attr("filter","url('#sg-effect-blur')").style("fill","none").style("filter","brightness(135%)").style("opacity","0.7"),i.svgGraph.append(a)),i.svgGraph.append(o),t.style)for(var l in t.style)o.style(l,t.style[l]);if(t.noblur&&t.blurstyle)for(var c in t.blurstyle)a.style(c,t.blurstyle[c]);n[r].classed("sg-highlight-hide",!0).style("opacity","0")}})),this},t.prototype.highlightAreas=function(t){var i=this;return(t=t||{}).series&&(t.series=Array.isArray(t.series)?t.series:[t.series]),this.svgGraph.selectAll(".sg-area").each((function(s,r,n){if((!t.series||~t.series.indexOf(s.series))&&(!t.filter||t.filter(i._cloneAreaData(s),n[r]))){var o=e(n[r].node().cloneNode(!0)).attr("class","sg-point-highlight").style("opacity","1");if(i.svgGraph.append(o),t.nooutline||(o.style("stroke","#000"),o.style("stroke-width","1.5")),t.style)for(var a in t.style)o.style(a,t.style[a]);n[r].classed("sg-highlight-hide",!0).style("opacity","0")}})),this}}(f,o),f.prototype.clearAllData=function(t){return this.clearPointsData(t),this.clearLinesData(t),this.clearAreasData(t),this},f.prototype.removeAll=function(){return this.removePoints().removeAllLines().removeAreas(),this},f.prototype.saveAsPng=function(t){t||(t="graph.png"),t.toLowerCase().endsWith(".png")||(t+=".png");var e=this.svg.attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").node();if(serializer=new XMLSerializer,svgHtml=serializer.serializeToString(e),canvas=document.createElement("canvas"),canvas.style.display="none",canvas.width=this.containerWidth,canvas.height=this.containerHeight,navigator.msSaveBlob&&canvg)return svgHtml=svgHtml.replace('style="width: 100%; height: 1px;','style="width:'+this.containerWidth+"px; height:"+this.containerHeight+"px;"),canvg(canvas,svgHtml),navigator.msSaveBlob(new Blob([canvas.msToBlob()],{type:"image/png"}),t),this;var i=document.createElement("a");i.style.display="none",i.download=t,this.svg.node().parentNode.appendChild(i);var s=new Image;s.onload=function(){if(canvas.getContext("2d").drawImage(s,0,0),navigator.msSaveBlob)try{navigator.msSaveBlob(new Blob([canvas.msToBlob()],{type:"image/png"}),t)}catch(t){alert("Sorry, SVG to PNG downloads are restricted in Internet Explorer, please try with another browser.")}else i.href=canvas.toDataURL("image/png"),i.click();i.parentElement.removeChild(i),canvas.remove()},s.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(svgHtml)))};const d=f})(),n.default})()));