/*! For license information please see d3.simplegraph.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.SimpleGraph=e(require("d3")):t.SimpleGraph=e(t.d3)}(self,(t=>(()=>{"use strict";var e={142:e=>{e.exports=t}},i={};function s(t){var r=i[t];if(void 0!==r)return r.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,s),n.exports}s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{var t,e,i;s.d(r,{default:()=>y}),String.prototype.startsWith||(t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var s=i.length,r=String(t),n=r.length,o=arguments.length>1?arguments[1]:void 0,a=o?Number(o):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),s);if(n+l>s)return!1;for(var h=-1;++h<n;)if(i.charCodeAt(l+h)!=r.charCodeAt(h))return!1;return!0},t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i),String.prototype.endsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var s=i.length,r=String(t),n=r.length,o=s;if(arguments.length>1){var a=arguments[1];void 0!==a&&(o=a?Number(a):0)!=o&&(o=0)}var l=Math.min(Math.max(o,0),s),h=l-n;if(h<0)return!1;for(var c=-1;++c<n;)if(i.charCodeAt(h+c)!=r.charCodeAt(c))return!1;return!0};t?t(String.prototype,"endsWith",{value:i,configurable:!0,writable:!0}):String.prototype.endsWith=i}();var n=s(142);const o=["diamond","circle","square","triangle","triangle-up","triangle-down"];function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function h(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function p(t){for(var e in t||(t={}),t.container||(t.container="body"),t.margins||(t.margins={}),t.axis||(t.axis={}),t.styles||(t.styles={}),this.allowDrawBeyondGraph=t.allowDrawBeyondGraph,this.margins={left:t.margins.left||0===t.margins.left?t.margins.left:40,right:t.margins.right||0===t.margins.right?t.margins.right:20,top:t.margins.top||0===t.margins.top?t.margins.top:20,bottom:t.margins.bottom||0===t.margins.bottom?t.margins.bottom:40},this.containerWidth=t.width?t.width:600,this.containerHeight=t.height?t.height:400,this.width=this.containerWidth-this.margins.left-this.margins.right,this.height=this.containerHeight-this.margins.top-this.margins.bottom,this.color=t.colorScale?t.colorScale:n.scaleOrdinal(n.schemeCategory10),this.customColors={},this.svg=n.select(t.container).append("svg").attr("width",this.containerWidth).attr("height",this.containerHeight).style("font-family","'Century Gothic', CenturyGothic, Geneva, AppleGothic, sans-serif").style("overflow","visible"),this.svgGraph=this.svg.append("g").attr("transform","translate("+this.margins.left+","+this.margins.top+")"),t.styles)this.svg.style(e,t.styles[e]);return this.resetAxisOptions(t.axis),this}p.prototype.getSvgElement=function(){return this.svg},p.prototype.getSvgGraphic=function(){return this.svgGraph},p.prototype.remove=function(){return this.svg.remove(),this},p.prototype.destroy=function(){this.svg.remove(),this.svg=null,this.svgGraph=null,this.clearAllData(),this.color=null,this.customColors=null,this.x=null,this.y=null,this.minMax=null,this.xScale=null,this.yScale=null,this.yAxis=null,this.xAxis=null,this.yGridAxis=null,this.xGridAxis=null,this.points=null,this.ptSeriesShapes=null,this.lines=null,this.pointLines=null,this.areas=null},function(t){t.prototype.resetAxisOptions=function(t){t||(t={}),t.x||(t.x={}),t.y||(t.y={}),t.styles||(t.styles={}),this.axisStyles=t.style,this.axisStyles=this.axisStyles||{},this.axisStyles.fill=this.axisStyles.fill||"none",this.axisStyles["stroke-width"]=this.axisStyles["stroke-width"]||.5,this.axisStyles.stroke=this.axisStyles.stroke||"black";for(var e=["x","y","y2"],i=0;i<e.length;i++){var s=e[i];if(!t[s]){if("y2"===s)continue;t[s]={}}t[s].scale||(t[s].scale=d3.scaleLinear);var r,n,o=t[s].scale===d3.scaleTime||t[s].scale===d3.scaleUtc,a=!o&&t[s].scale===d3.scaleLog;if(t[s].format||(t[s].format=o?"%Y-%m-%d":".0f"),t[s].grid||(t[s].grid={}),a&&!t[s].logBase&&(t[s].logBase=10),this[s]={label:null===t[s].label?"x"===s?"x-value":"y-value":t[s].label,isDate:o,isLog:a},o?t[s].scale===d3.scaleUtc?this[s].format=d3.utcFormat(t[s].format):this[s].format=d3.timeFormat(t[s].format):this[s].format=d3.format(t[s].format),this[s].min=t[s].min?t[s].min:0,this[s].max=t[s].max?t[s].max:100,this[s].scale=t[s].scale(),a&&this[s].scale.base(t[s].logBase),t[s].break){this[s].break=t[s].break,r=[this[s].min,this[s].break.domain[0],this[s].break.domain[1],this[s].max];var l=o?r.map((function(t){return t.getTime()})):r,h="x"===s?this.width:this.height;n="x"===s?[0,0,0,h]:[h,0,0,0];var c=(h-this[s].break.rangegap)/(l[1]-l[0]+l[3]-l[2]);n[1]=c*(l[1]-l[0]),n[2]=n[1]+this[s].break.rangegap}else r=[this[s].min,this[s].max],n="x"===s?[0,this.width]:[this.height,0];this[s].scale.domain(r).range(n);var u=!1;"x"===s?(u=!0,this[s].axis=d3.axisBottom(this[s].scale),this[s].axisTwo=d3.axisTop(this[s].scale),this[s].gridAxis=d3.axisBottom(this[s].scale)):"y2"===s?(this[s].axis=d3.axisRight(this[s].scale),this[s].gridAxis=d3.axisRight(this[s].scale)):(this[s].axis=d3.axisLeft(this[s].scale),this[s].gridAxis=d3.axisLeft(this[s].scale)),a?(this[s].axis.tickFormat(this[s].format),t[s].ticks?this[s].axis.ticks(t[s].ticks,this[s].format):(this[s].axis.ticks(this[s].format),t[s].tickValues&&this[s].axis.tickValues(t[s].tickValues)),u&&(this[s].axisTwo.tickFormat(this[s].format),t[s].ticks?this[s].axisTwo.ticks(t[s].ticks,this[s].format):(this[s].axisTwo.ticks(this[s].format),t[s].tickValues&&this[s].axisTwo.tickValues(t[s].tickValues)))):(this[s].axis.tickFormat(this[s].format),t[s].tickValues?(this[s].axis.tickValues(t[s].tickValues),this[s].gridAxis.tickValues(t[s].tickValues)):(t[s].ticks||0===t[s].ticks)&&(Array.isArray(t[s].ticks)?(this[s].axis.ticks(t[s].ticks[0],t[s].ticks[1]),this[s].gridAxis.ticks(t[s].ticks[0],t[s].ticks[1])):(this[s].axis.ticks(t[s].ticks),this[s].gridAxis.ticks(t[s].ticks))),this[s].gridAxis.tickFormat(this[s].format),t[s].grid.tickValues?this[s].gridAxis.tickValues(t[s].grid.tickValues):(t[s].grid.ticks||0===t[s].grid.ticks)&&(Array.isArray(t[s].grid.ticks)?this[s].gridAxis.ticks(t[s].grid.ticks[0],t[s].grid.ticks[1]):this[s].gridAxis.ticks(t[s].grid.ticks)),u&&(this[s].axisTwo.tickFormat(this[s].format),t[s].tickValues?this[s].axisTwo.tickValues(t[s].tickValues):(t[s].ticks||0===t[s].ticks)&&(Array.isArray(t[s].ticks)?this[s].axisTwo.ticks(t[s].ticks[0],t[s].ticks[1]):this[s].axisTwo.ticks(t[s].ticks))))}return this.minMax={x:[this.x.min,this.x.max],y:[this.y.min,this.y.max]},this.xScale=this.x.scale,this.xAxis=this.x.axis,this.xGridAxis=this.x.gridAxes,this.yScale=this.y.scale,this.yAxis=this.y.axis,this.yGridAxis=this.y.gridAxes,this.removeAll(),this.drawAxes(),this},t.prototype.drawAxes=function(t,e,i){var s,r=this;e?"top"!==(e=e.toLowerCase().trim())&&(e="bottom"):e="bottom";var n=0;"top"!==e?(s=this.x.axis,n=this.height):s=this.x.axisTwo,i||(i=0),this.svg.selectAll(".sg-xaxis, .sg-yaxis, .sg-y2axis, .sg-axis-label").remove();var o=this.svgGraph.append("g").attr("class","sg-xaxis").attr("transform","translate(0,"+n+")").call(s).attr("font-size",null).attr("font-family",null),a=this.svgGraph.append("g").attr("class","sg-yaxis").call(this.y.axis).attr("font-size",null).attr("font-family",null),l=this.y2?this.svgGraph.append("g").attr("class","sg-y2axis").attr("transform","translate("+this.width+",0)").call(this.y2.axis).attr("font-size",null).attr("font-family",null):null;this.svgGraph.selectAll(".tick line").style("stroke","#000");var h=this.svgGraph.selectAll(".sg-xaxis .domain, .sg-yaxis .domain, .sg-y2axis .domain");for(var c in this.axisStyles)h.style(c,this.axisStyles[c]);var u={x:0,y:0,y2:0};this.svgGraph.selectAll(".sg-xaxis .tick").each((function(){this.getBBox().height>u.x&&(u.x=this.getBBox().height)})),this.svgGraph.selectAll(".sg-yaxis .tick").each((function(){this.getBBox().width>u.y&&(u.y=this.getBBox().width)})),this.svgGraph.selectAll(".sg-y2axis .tick").each((function(){this.getBBox().width>u.y2&&(u.y2=this.getBBox().width)}));var p={a:"middle",x:.5*this.width,y:"top"===e?-(u.x+i):u.x+10+i},y={a:"middle",x:-.5*this.height,y:-(u.y+10+i)},f={a:"middle",x:.5*this.height,y:-(u.y2+10+i)};if(t){var d=t.toLowerCase().split(/[ ,]+/),g="center",m="center",x="center",v="outside",w="outside",b="outside";d.forEach((function(t){var s=t.trim().split("-"),n=s.length>1&&s[0];switch(t=s.length>1?s[s.length-1]:s[0]){case"outside":n&&"x"!==n||(p.y="top"===e?-(u.x+i):u.x+10+i,v="outside"),n&&"y"!==n||(y.y=-(u.y+10+i),w="outside"),n&&"y2"!==n||(f.y=-(u.y2+10+i),b="outside");break;case"inside":n&&"x"!==n||(p.y="top"===e?14+i:-(6+i),v="inside"),n&&"y"!==n||(y.y=5,w="inside"),n&&"y2"!==n||(f.y=5,b="inside");case"center":n&&"x"!==n||(p.a="middle",p.x=.5*r.width,g="center"),n&&"y"!==n||(y.a="middle",y.x=-.5*r.height,m="center"),n&&"y2"!==n||(f.a="middle",f.x=.5*r.height,x="center");break;case"left":p.a="start",p.x=0,g="left";break;case"right":p.a="end",p.x=r.width,g="right";break;case"top":n&&"y"!==n||(y.a="end",y.x=0,m="top"),n&&"y2"!==n||(f.a="start",f.x=0,x="top");break;case"bottom":n&&"y"!==n||(y.a="start",y.x=-r.height,m="bottom"),n&&"y2"!==n||(f.a="end",f.x=r.height,x="bottom")}})),"inside"===v&&("left"===g?p.x+=10:"right"===g&&this.y2&&(p.x-=10),"bottom"===e?("left"===g&&"inside"===w&&"bottom"===m&&(p.x+=10,y.x+=10),"right"===g&&this.y2&&"inside"===b&&"bottom"===x&&(p.x-=10,f.x-=10)):("left"===g&&"inside"===w&&"top"===m&&(p.x+=10,y.x-=10),"right"===g&&this.y2&&"inside"===b&&"top"===x&&(p.x-=10,f.x+=10)))}return"inside"===w&&("top"===m&&(y.x-=5),"bottom"===m&&(y.x+=5)),"inside"===b&&("top"===x&&(f.x+=5),"bottom"===x&&(y2LLabelPos.x-=5)),o.append("text").attr("class","sg-axis-label sg-xaxis").attr("x",p.x).attr("y",p.y).attr("fill","#000").style("text-anchor",p.a).style("font-weight","bolder").text(this.x.label),a.append("text").attr("class","sg-axis-label sg-yaxis").attr("transform","rotate(-90)").attr("x",y.x).attr("y",y.y).attr("dy",".71em").attr("fill","#000").style("text-anchor",y.a).style("font-weight","bolder").text(this.y.label),l&&l.append("text").attr("class","sg-axis-label sg-y2axis").attr("transform","rotate(90)").attr("x",f.x).attr("y",f.y).attr("dy",".71em").attr("fill","#000").style("text-anchor",f.a).style("font-weight","bolder").text(this.y2.label),this}}(p),function(t){t.prototype.getColorBySeriesName=function(t,e){if(!t)return null;if(t in this.customColors)return this.customColors[t];if(this.points)for(var i in this.points){var s=this.points[i];if(t===s.series)return s.style&&s.style.fill?s.style.fill:e||this.color.domain().indexOf(t)>=0?this.color(t):null}if(this.lines)for(var r in this.lines){var n=this.lines[r];if(t===n.series)return n.style&&n.style.stroke?n.style.stroke:e||this.color.domain().indexOf(t)>=0?this.color(t):null}if(this.areas)for(var o in this.areas){var a=this.areas[o];if(t===a.series)return a.style&&a.style.fill?a.style.fill:e||this.color.domain().indexOf(t)>=0?this.color(t):null}return e?this.color(t):null},t.prototype.resetColorScale=function(t){return t?this.color=t:this.color.domain([]),this},t.prototype.setSeriesColor=function(t,e){this.customColors[t]=e},t.prototype.removeSeriesColor=function(t){return this.customColors[t]&&delete this.customColors[t],this}}(p),function(t){t.prototype.drawGrid=function(t){this.svgGraph.selectAll(".sg-grid").remove();var e=t&&t.opacity?parseFloat(t.opacity):.4,i=t&&t.stroke?t.stroke:"#555",s=t&&t["stroke-width"]?parseFloat(t["stroke-width"]):.3;return this.svgGraph.append("g").attr("class","sg-grid").attr("transform","translate(0,"+this.height+")").style("opacity",e).style("stroke",i).style("stroke-width",s).call(this.x.gridAxis.tickSize(-this.height).tickFormat("")),this.svgGraph.append("g").attr("class","sg-grid").attr("opacity",e).style("stroke",i).style("stroke-width",s).call(this.y.gridAxis.tickSize(-this.width).tickFormat("")),this},t.prototype.removeGrid=function(){return this.svgGraph.selectAll(".sg-grid").remove(),this},t.prototype.drawLegend=function(t,e){this.svg.selectAll(".sg-legend").remove(),t?t.x&&t.y||(t.x||0===t.x||(t.x=void 0!==t[0]&&"number"==typeof t[0]?t[0]:this.width+5),t.y||0===t.y||(t.y=void 0!==t[1]&&"number"==typeof t[1]?t[1]:0)):t={x:0,y:0};var i=(e=e||{}).anchor||"left",s=e.bgstyle||{},r=e.exclude||[];r||(r=[]),"string"==typeof r&&(r=r.trim().split(/\s+/));for(var n=0;n<r.length;n++)r[n]=r[n].toLowerCase();if(s.padding){var o="string"==typeof s.padding?s.padding.split(" "):[s.padding];1===o.length?(s["padding-left"]=o[0],s["padding-right"]=o[0],s["padding-top"]=o[0],s["padding-bottom"]=o[0]):2===o.length?(s["padding-left"]=o[1],s["padding-right"]=o[1],s["padding-top"]=o[0],s["padding-bottom"]=o[0]):(o.length>3&&(s["padding-left"]=o[3]),s["padding-right"]=o[1],s["padding-top"]=o[0],s["padding-bottom"]=o[2]),delete s.padding}else s["padding-left"]||(s["padding-left"]=0),s["padding-right"]||(s["padding-right"]=0),s["padding-top"]||(s["padding-top"]=0),s["padding-bottom"]||(s["padding-bottom"]=0);s.fill||(s.fill="#fff",s.opacity=0),s["padding-left"]=parseInt(s["padding-left"]),s["padding-right"]=parseInt(s["padding-right"]),s["padding-top"]=parseInt(s["padding-top"]),s["padding-bottom"]=parseInt(s["padding-bottom"]);var a=this.svg.append("g").attr("class","sg-legend").attr("transform","translate("+t.x+","+t.y+")"),l=a.append("rect").attr("class","sg-legend-bg").attr("x",0).attr("y",0);for(var h in s)h.startsWith("padding")||l.style(h,s[h]);var c=e.itemsPerColumn||0,u=e.rowHeight||24,p=0,y=s["padding-top"],f=s["padding-left"];function d(){p++,c>0&&p>=c?(p=0,y=s["padding-top"],f=a.node().getBBox().width+12):y+=u}var g=this;function m(t,e,i,s){if(s){var r=y+10,n=a.append("path").attr("x",f).attr("y",y).attr("d","M"+f+" "+r+" L"+(18+f)+" "+r);for(var o in g.pointLines[0].style)n.style(o,g.pointLines[0].style[o]);n.style("stroke",g.getColorBySeriesName(t.series))}var l="function"==typeof t.size?t.size():t.size;l>14&&(l=14);var h=f+2,c=y+3;if(e&&e.startsWith("triangle")){var u=1.519676*l,p=u/2,m=.86602*u;switch(h+=7-p,c+=7-.5*m,e){case"triangle-down":a.append("polygon").attr("points","".concat(h,",").concat(c+m," ")+"".concat(h+p,",").concat(c," ")+"".concat(h+u,",").concat(c+m)).style("fill",i);break;case"triangle":case"triangle-up":a.append("polygon").attr("points","".concat(h,",").concat(c," ")+"".concat(h+p,",").concat(c+m," ")+"".concat(h+u,",").concat(c)).style("fill",i)}}else{var x=l/2,v=7-x;h+=v,c+=v,"circle"===e?a.append("circle").attr("cx",h+x).attr("cy",c+x).attr("r",x).style("fill",i):a.append("rect").attr("x",h).attr("y",c).attr("width",l).attr("height",l).attr("transform","square"==e?"":"rotate(45,".concat(h+x,",").concat(c+x,")")).style("fill",i)}a.append("text").attr("x",f+23).attr("y",y+9).attr("dy",".35em").style("text-anchor","start").text(t.series),d()}function x(t,e){var i=y+10,s=a.append("path").attr("x",f).attr("y",y).attr("d","M"+f+" "+i+" L"+(18+f)+" "+i);for(var r in t.style)s.style(r,t.style[r]);"stroke"in t.style||s.style("stroke",e),a.append("text").attr("x",f+23).attr("y",y+9).attr("dy",".35em").style("text-anchor","start").text(t.series),d()}function v(t,e){var i=a.append("rect").attr("x",f).attr("y",y).attr("width",18).attr("height",18);for(var s in t.style)i.style(s,t.style[s]);"fill"in t.style||i.style("fill",e),a.append("text").attr("x",f+23).attr("y",y+9).attr("dy",".35em").style("text-anchor","start").text(t.series),d()}if(this.areas&&!~r.indexOf("areas"))for(var w=[],b=0;b<this.areas.length;b++){var k=this.areas[b].series;if(!~w.indexOf(k)){w.push(k);var A=this.getColorBySeriesName(this.areas[b].series);v(this.areas[b],"function"==typeof A?A(this.areas[b]):A)}}if(this.lines&&!~r.indexOf("lines"))for(var S=[],_=0;_<this.lines.length;_++){var L=this.lines[_].series;if(!~S.indexOf(L)){S.push(L);var N=this.getColorBySeriesName(this.lines[_].series);x(this.lines[_],"function"==typeof N?N(this.lines[_]):N)}}if(this.points&&!~r.indexOf("points"))for(var z=[],C=0;C<this.points.length;C++){var B=this.points[C].series;if(!~z.indexOf(B)){z.push(B);var F=!1;if(this.pointLines)for(var G=this.pointLines.length;G--;)if(this.pointLines[G].series===B){F=!0;break}var P=this.getColorBySeriesName(this.points[C].series);P="function"==typeof P?P(this.points[C]):P,m(this.points[C],this.getPointSeriesShape(B),P,F)}}var D=a.node().getBBox();return l.attr("width",D.width+s["padding-left"]+s["padding-right"]).attr("height",D.height+s["padding-top"]+s["padding-bottom"]),"middle"===(i=i.trim().toLowerCase())?t.x-=.5*D.width:"right"===i&&(t.x-=D.width),a.attr("transform","translate("+t.x+","+t.y+")"),this}}(p),function(t){t.prototype.addPointData=function(t,e,i,s){this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(s=s||{}).size=!s.size||"function"!=typeof s.size&&s.size<=0?s.size=10:s.size,s.y2Axis=!!s.y2Axis,s.showNulls=!!s.showNulls,s.shape&&this.setPointSeriesShape(t,s.shape);var r={series:t,x:parseFloat(e),y:parseFloat(i),y2:s.y2Axis,size:s.size,_bind:null,_keys:null};if(isNaN(r.y)||!r.y&&0!==r.y){if(!showNulls)return this;r.y=0,r.wasNull=!0}return this.points.push(r),this},t.prototype.addPointsData=function(t,e,i,s,r){var n=this;if(!t||0===t.length)return this;this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(r=r||{}).size=!r.size||"function"!=typeof r.size&&r.size<=0?r.size=10:r.size,r.y2Axis=!!r.y2Axis,r.showNulls=!!r.showNulls,r.additionalDataKeys=r.additionalDataKeys||null;var o=this;return t.forEach((function(t,a){var l=e?t[e]?t[e]:e:a,h=t[i],c=t[s];r.shape&&(o.ptSeriesShapes[l]=r.shape);var u={series:l,x:h,y:parseFloat(c),y2:r.y2Axis,size:r.size,_bind:t,_keys:{x:i,y:s,additional:null}};if(isNaN(u.y)||!u.y&&0!==u.y){if(!showNulls)return;u.y=0,u.wasNull=!0}if(r.additionalDataKeys&&Array.isArray(r.additionalDataKeys)){var p=[];r.additionalDataKeys.forEach((function(e){for(var i=e,s=1;i in u;)i=e+String(++s);p.push({key:e,name:i}),u[i]=t[e]})),u._keys.additional=p}n.points.push(u)})),this},t.prototype.addPointsDataAsArray=function(t,e,i){if(!e||0===e.length)return this;this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(i=i||{}).size=!i.size||"function"!=typeof i.size&&i.size<=0?i.size=10:i.size,i.y2Axis=!!i.y2Axis,i.showNulls=!!i.showNulls,i.shape&&this.setPointSeriesShape(t,i.shape);var s=this;return e.forEach((function(e){var r={series:t,x:parseFloat(e[0]),y:parseFloat(e[1]),y2:i.y2Axis,size:i.size,_bind:e,_keys:{x:0,y:1,additional:null}};if(isNaN(r.y)||!r.y&&0!==r.y){if(!showNulls)return;r.y=0,r.wasNull=!0}s.points.push(r)})),this},t.prototype.clearPointsData=function(t){return this.points=t?this.points.filter((function(e){return e.series!==t})):null,this},t.prototype.getPointsDataBySeries=function(t){return this.points?this.points.filter((function(e){return e.series===t})).map((function(t){return{x:t.x,y:t.y,y2:t.y2,size:t.size}})):[]},t.prototype.getPointCoordinatesBySeries=function(t){return this.points?this.points.filter((function(e){return e.series===t})).map((function(t){return[t.x,t.y||0===t.y?t.y:t.y2]})):[]},t.prototype.getPointSeriesShape=function(t){return this.ptSeriesShapes=this.ptSeriesShapes||{},this.ptSeriesShapes[t]},t.prototype.setPointSeriesShape=function(t,e){return this.ptSeriesShapes=this.ptSeriesShapes||{},this.ptSeriesShapes[t]=~o.indexOf(e)?e:null,this},t.prototype.updatePointsData=function(){if(!this.points)return this;if(this.points.forEach((function(t){t._bind&&t._keys&&(t.x=parseFloat(t._bind[t._keys.x]),t.y=parseFloat(t._bind[t._keys.y]),t._keys.a&&t._keys.additional.forEach((function(e){return t[e.name]=t._bind[e.key]})))})),!this.pointLines)return this;for(var t={},e=0;e<this.points.length;e++){var i=this.points[e].series;i in t?t[i].push(this.points[e]):t[i]=[this.points[e]]}var s=this;return this.pointLines=this.pointLines.filter((function(e){return e.series in t&&(e.coords=s._getPointLine(t[e.series]),!0)})),this}}(p),function(t,e){t.prototype.addAreaBetweenTwoLines=function(t,i,s,r,n){return s&&"function"==typeof s&&i&&"function"==typeof i?(n=n||{},this.areas=this.areas||[],this.areas.push({series:t,functions:[i,s],coords:null,xRange:r?a(r):null,y2:!!n.y2Axis,style:n.style||{},interpolate:n.interpolation||e.curveLinear,_bind:{xRange:r}}),this):this},t.prototype.addAreaAsCoordinates=function(t,i,s){return!i||!Array.isArray(i)||i.length<2||(s=s||{},this.areas=this.areas||[],this.areas.push({series:t,functions:null,coords:i,resolution:null,xRange:null,y2:!!s.y2Axis,style:s.style||{},interpolate:s.interpolation||e.curveLinear,_bind:{coords:i}})),this},t.prototype.getAreasDataBySeries=function(t){return this.areas?this.areas.filter((function(e){return e.series===t})).map((function(t){return{series:t.series,functions:t.functions?a(t.functions):null,coords:t.coords?t.coords.map((function(t){return a(t)})):null,xRange:t.xRange?a(t.xRange):null,y2:t.y2,style:t.style,interpolate:t.interpolate}})):[]},t.prototype.updateAreaData=function(t,e,i){if(!this.areas||!i)return this;var s=this.areas.filter((function(e){return e.series===t}));if(!s||!s.length)return this;if(e||0===e){for(;e<0;)e=s.length+e;s=[s[e]]}return s.forEach((function(t){if(t.functions&&(i.lineFunctionTop||i.functionTop||i.lineFunctionBottom||i.functionBottom)?(t.functions=[i.lineFunctionBottom||i.functionBottom||t.functions[0],i.lineFunctionTop||i.functionTop||t.functions[1]],t.xRange=i.xRange||t.xRange):t.coords=i.coordinates||i.coords||t.coords,t.interpolate=i.interpolate||t.interpolate,i.style)for(var e in i.style)t.style[e]=i.style[e]})),this},t.prototype.clearAreasData=function(t){return this.areas=t?this.areas.filter((function(e){return e.series!==t})):null,this},t.prototype.updateAreaInterpolation=function(t,i){return this.areas?(i=i||e.curveLinear,this.areas.forEach((function(e){e.series===t&&(e.interpolate=i)})),this):this},t.prototype.updateAreasData=function(){return this.areas?(this.areas.forEach((function(t){t._bind.xRange&&(t.xRange=a(t._bind.xRange)),t._bind.coords&&(t.coords=t._bind.coords.map((function(t){return a(t)})))})),this):this}}(p,n),function(t,e){t.prototype.addLineDataAsCoordinates=function(t,i,s){if(!i||0===i.length)return this;this.lines=this.lines||[];var r=(s=s||{}).style||{};return r["stroke-width"]&&"number"==typeof r["stroke-width"]||(r["stroke-width"]=1.5),this.lines.push({series:t,lineFunction:null,coords:i.map((function(t){return h(t)})),xRange:null,y2:!!s.y2Axis,style:r,interpolate:s.interpolation||e.curveLinear,_bind:{coords:i}}),this},t.prototype.addLineDataAsFunction=function(t,i,s,r){if(!i||"function"!=typeof i||"number"!=typeof i(0))return this;this.lines=this.lines||[];var n=(r=r||{}).style||{};n["stroke-width"]&&"number"==typeof n["stroke-width"]||(n["stroke-width"]=1.5);var o=o||e.curveLinear;return this.lines.push({series:t,lineFunction:i,coords:null,xRange:s?h(s):null,y2:!!r.y2Axis,style:n,interpolate:r.interpolation||e.curveLinear,_bind:{xRange:s}}),this},t.prototype.addLinesDataFromPoints=function(t,i){if(!this.points||0===this.points.length)return this;var s=(i=i||{}).handleOverlap?i.handleOverlap.toLowerCase():"average",r=i.style||{};r["stroke-width"]&&"number"==typeof r["stroke-width"]||(r["stroke-width"]=1.5),r.stroke&&delete r.stroke;for(var n={},o=0;o<this.points.length;o++){var a=this.points[o].series;a in n?(n[a].y2=this.points[o].y2,n[a].points.push(this.points[o])):n[a]={points:[this.points[o]]}}var l=function(t){return!0};for(var h in t&&("function"==typeof t?l=t:"string"==typeof t?l=function(e){return e===t}:Array.isArray(t)&&(l=function(e){return~t.indexOf(e)})),this.pointLines=[],n)if(l(h)&&!(n[h].points.length<2)){var c=this._getPointLine(n[h].points,s);c.length>=2&&this.pointLines.push({series:h,lineFunction:null,resolution:null,coords:c,xRange:null,y2:n[h].y2,style:r,interpolate:i.interpolation||e.curveLinear})}return this},t.prototype._getPointLine=function(t,e){t.sort((function(t,e){return t.x-e.x}));for(var i=[],s=0;s<t.length;++s){for(var r=t[s],n=[r.y],o=[r.x,r.y],a=!1;s+1<t.length&&(r=t[s+1]).x===o[0];)a=!0,n.push(r.y),++s;if(a)if(~["mean","average"].indexOf(e))o[1]=n.reduce((function(t,e){return t+e}));else switch(n.sort(),e){case"lowest":case"min":o[1]=n[0];break;case"highest":case"max":o[1]=n[n.length-1];break;case"median":o[1]=n[Math.floor(.5*n.length)];break;default:throw"Unknown handle overlap operation: ".concat(e)}i.push(o)}return i},t.prototype.clearLinesData=function(t){return this.lines=t?this.lines.filter((function(e){return e.series!==t})):null,this},t.prototype.clearPointLinesData=function(t){return this.pointLines=t?pointLines.lines.filter((function(e){return e.series!==t})):null,this},t.prototype.getLinesDataBySeries=function(t){return this.lines?this.lines.filter((function(e){return e.series===t})).map((function(t){return{series:t.series,lineFunction:t.lineFunction,coords:t.coords?t.coords.map((function(t){return h(t)})):null,xRange:t.xRange?h(t.xRange):null,y2:t.y2,style:t.style,interpolate:t.interpolate}})):[]},t.prototype.updateLineData=function(t,e,i){if(!this.lines||!i)return this;var s=this.lines.filter((function(e){return e.series===t}));if(!s||!s.length)return this;if(e||0===e){for(;e<0;)e=s.length+e;s=[s[e]]}return s.forEach((function(t){if(t.lineFunction&&(i.lineFunction||i.function)?(t.lineFunction=i.lineFunction||i.function||t.lineFunction,t.xRange=i.xRange||t.xRange):t.coords=i.coordinates||i.coords||t.coords,t.interpolate=i.interpolate||t.interpolate,i.style)for(var e in i.style)t.style[e]=i.style[e]})),this},t.prototype.updateLineInterpolation=function(t,i){return this.lines?(i=i||e.curveLinear,this.lines.forEach((function(e){e.series===t&&(e.interpolate=i)})),this):this},t.prototype.updateLinesData=function(){return this.lines?(this.lines.forEach((function(t){t._bind.xRange&&(t.xRange=h(t._bind.xRange)),t._bind.coords&&(t.coords=t._bind.coords.map((function(t){return h(t)})))})),this):this}}(p,n),function(t){t.prototype._findIntercept=function(t,e,i,s){var r,n=t(e),o=t(i),a=s?this.y2:this.y;if(n<a.min!=o<a.min)r=a.min;else{if(n>a.max==o>a.max)return null;r=a.max}var l,h,c,u,p,y=e+.5*(i-e),f=.25*Math.abs(i-e),d=n,g=e;e-=1e-5,i+=1e-5;for(var m=0;m++<100;){if(l=t(y),h=Math.abs(l-r),y>=this.x.min&&y<=this.x.max&&h<1e-6)return[y,r];if(m>0&&u<h?(y=g,l=d,f*=.5):((c=l>r!=(y>g==l>d))!==p&&(f*=.5),g=y,d=l,p=c,u=h),(y+=p?f:-f)<e||y>i)return null}return null},t.prototype._getLineSegmentsFromCoordinates=function(t,e){for(var i=e?this.y2:this.y,s=[],r=[],n=null,o=!1,a=!1,l=0;l<t.length;l++){var h=t[l];if(void 0!==h[1]&&null!==h[1]){var c=n?(t[l][1]-n[1])/(t[l][0]-n[0]):0;if(o){if(!a&&h[0]>=this.x.max&&(a=!0,h[0]>this.x.max)){if(!n)break;h=[this.x.max,n[0]+c*(h[1]-n[1])]}if(h[1]>=i.min&&h[1]<=i.max){if(0===r.length&&n&&0!==c){var u=c>0?i.min:i.max;h=[(this.x.isDate?n[0].getTime():n[0])+(u-n[1])/c,u],this.x.isDate&&(h[0]=new Date(h[0])),l--}r.push(h)}else r.length>0&&(u=c>0?i.max:i.min,h=[(this.x.isDate?n[0].getTime():n[0])+(u-n[1])/c,u],this.x.isDate&&(h[0]=new Date(h[0])),r.push(h)),r.length>1&&(s.push(r),r=[]);if(a)break;n=h}else{if(h[0]>=this.x.min){if(o=!0,h[0]>this.x.min&&n){var p=[this.x.min,n[0]+c*(h[1]-n[1])];p[1]>=i.min&&p[1]<=i.max&&r.push(p)}h[1]>=i.min&&h[1]<=i.max&&r.push(h)}n=h}}else r.length>1&&s.push(r),r=[],n=null}return r.length>1&&s.push(r),s},t.prototype._getLineSegmentsFromFunction=function(t,e,i,s,r){var n;if(i?(i[0]<this.x.min&&(i[0]=this.x.min),i[1]>this.x.max&&(i[0]=this.x.max)):i=[this.x.min,this.x.max],e&&"number"==typeof e||(e=Math.floor((this.width-this.margins.left-this.margins.right)/10)),e<2&&(e=2),this.x.isLog){var o=Math.pow(i[1]/i[0],1-e);n=function(t){return(t*=o)>i[1]?i[1]:t}}else{var a=(i[1]-i[0])/(e-1),l=this.x.isDate;n=function(t){return l?new DateUTC(t.getTime()+a):t+a}}for(var h=[],c=[],u=i[0],p=u,y=s?this.y2:this.y;;){var f=!1;(u>=i[1]||isNaN(u))&&(u=i[1],f=!0);var d=t(u);if(r){var g;if(d>=y.min&&d<=y.max)0===c.length&&u>i[0]&&(g=this._findIntercept(t,p,u,s))&&c.push(g),c.push([u,d]);else c.length>0&&(g=this._findIntercept(t,p,u,s))&&c.push(g),c.length>1&&(h.push(c),c=[]);if(p=u,u=n(u),f)break}else c.push([u,d])}return c.length>1&&h.push(c),h},t.prototype._getAreaPolysFromCoordinates=function(t,e){for(var i=[],s=[],r=0;r<t.length;r++)i.push([t[r][0],t[r][1]]),s.push([t[r][0],t[r][2]]);return this._getAreaPolysFromLineCrosswalk(this._getLineSegmentsFromCoordinates(i,e),this._getLineSegmentsFromCoordinates(s,e),e)},t.prototype._getAreasPolysFromFunctions=function(t,e,i,s,r,n){return this._getLineSegmentsFromFunction(t,i,s,r,n),this._getLineSegmentsFromFunction(e,i,s,r,n),this._getAreaPolysFromLineCrosswalk(this._getLineSegmentsFromFunction(t,i,s,r,n),this._getLineSegmentsFromFunction(e,i,s,r,n),r)},t.prototype._getAreaPolysFromLineCrosswalk=function(t,e,i){for(var s,r,n=[],o=[],a=[0,0],l=[0,0],h=[!1,!1],c=[!1,!1];;){s=h[0]?null:t[a[0]][l[0]],r=h[1]?null:e[a[1]][l[1]];var u=[!1,!1];if(!s&&!r)break;s&&r?s[0]===r[0]?(o.push([s[0],s[1],r[1]]),u[0]=u[1]=!0):(s[0]<r[0]?u[0]=!0:u[1]=!0,o.length>=2&&n.push(o),o=[]):(u=[!0,!0],o.length>=2&&n.push(o),o=[]);for(var p=[!1,!1],y=0;y<2;y++)if(!h[y]){var f=0===y?t:e;u[y]&&(l[y]+=1),c[y]=l[y]>=f[a[y]].length,c[y]&&(a[y]+=1,l[y]=0,p[y]=!0,h[y]=a[y]>=f.length)}if(p[0]&&p[1]&&(o.length>=2&&n.push(o),o=[]),h[0]&&h[1]){o.length>=2&&n.push(o);break}}return n}}(p),function(t,e){t.prototype.removePoints=function(){return this.svgGraph.selectAll(".sg-point").remove(),this},t.prototype.drawPoints=function(t,e){var i=this;if(this.removePoints(),!this.points||0===this.points.length)return this;var s=this.points;if(this.allowDrawBeyondGraph||(s=s.filter((function(e){if(!e.x&&0!==e.x||Number.isNaN(e.x))return!1;if(e.x<i.x.min||e.x>i.x.max)return!1;if(i.x.break&&e.x>i.x.break.domain[0]&&e.x<i.x.break.domain[1])return!1;if(!e.y&&0!==e.y||Number.isNaN(e.y)&&!t)return!1;var s=e.y2?i.y2:i.y;return!(e.y<s.min||e.y>s.max||s.break&&e.y>s.break.domain[0]&&e.y<s.break.domain[1])}))),!s.length)return this;var r={};for(var n in s.forEach((function(t){t.series in r?r[t.series].push(t):r[t.series]=[t]})),r)this._drawPoints(this.svgGraph.selectAll(".sg-temporary-point").data(r[n]).enter(),this.ptSeriesShapes[n],e);return this},t.prototype.drawUpdatePoints=function(t,i){var s=this;if(!this.points||0===this.points.length)return this.removePoints(),this.removePointLines(),this;i&&(i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut);var r=this.points;this.allowDrawBeyondGraph||(r=r.filter((function(e){if(!e.x&&0!==e.x||Number.isNaN(e.x))return!1;if(e.x<s.x.min||e.x>s.x.max)return!1;if(s.x.break&&e.x>s.x.break.domain[0]&&e.x<s.x.break.domain[1])return!1;if(!e.y&&0!==e.y||Number.isNaN(e.y)&&!t)return!1;var i=e.y2?s.y2:s.y;return!(e.y<i.min||e.y>i.max||i.break&&e.y>i.break.domain[0]&&e.y<i.break.domain[1])})));var n={};r.forEach((function(t){t.series in n?n[t.series].push(t):n[t.series]=[t]}));var o=function(t){var e;l=n[t],h=s.ptSeriesShapes[t],(c=s.svgGraph.selectAll(".sg-point").filter((function(e){return e.series===t}))).filter((function(t){return!~l.indexOf(t)})).remove(),c=c.filter((function(t){return~l.indexOf(t)})),p=function(t){if(Array.isArray(t))return u(t)}(e=l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c.each((function(t){var e=p.indexOf(t);~e&&p.splice(e,1)})),s._drawPoints(s.svgGraph.selectAll(".sg-temporary-point").data(p).enter(),h,i),s._updatePoints(c,h,i)};for(var a in n){var l,h,c,p;o(a)}return this},t.prototype._drawPoints=function(t,i,s){if(t.size()){var r,n=this;switch(i){case"triangle-down":r=t.append("polygon").attr("series",(function(t){return t.series})).style("opacity",s?0:1).attr("class","sg-point sg-point-td").attr("points",(function(t){var e=e="function"==typeof t.size?t.size():t.size,i=1.519676*e,s=.86602*i*.5,r=.5*i,o=n.x.scale(t.x),a=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return a=(t.y2?n.y2.scale:n.y.scale)(a),"".concat(o-r,",").concat(a+s," ").concat(o,",").concat(a-s," ").concat(o+r,",").concat(a+s)})).style("fill",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}));break;case"triangle":case"triangle-up":r=t.append("polygon").attr("series",(function(t){return t.series})).style("opacity",s?0:1).attr("class","sg-point sg-point-tu").attr("points",(function(t){var e=e="function"==typeof t.size?t.size(t,t._bind):t.size,i=1.519676*e,s=.86602*i*.5,r=.5*i,o=n.x.scale(t.x),a=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return a=(t.y2?n.y2.scale:n.y.scale)(a),"".concat(o-r,",").concat(a-s," ").concat(o,",").concat(a+s," ").concat(o+r,",").concat(a-s)})).style("fill",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}));break;case"square":case"diamond":r=t.append("rect").attr("series",(function(t){return t.series})).style("opacity",s?0:1).attr("class","sg-point sg-point-sd").attr("width",(function(t){return"function"==typeof t.size?t.size():t.size})).attr("height",(function(t){return"function"==typeof t.size?t.size():t.size})).attr("x",(function(t){var e="function"==typeof t.size?t.size():t.size;return n.x.scale(t.x)-e/2})).attr("y",(function(t){!t.y&&0!==t.y||Number.isNaN(t.y)||t.y;var e="function"==typeof t.size?t.size():t.size;return(t.y2?n.y2.scale:n.y.scale)(t.y)-e/2})).attr("transform",(function(t){if("diamond"!==i)return"";var e=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return"rotate(45,".concat(n.x.scale(t.x),",").concat((t.y2?n.y2.scale:n.y.scale)(e),")")})).style("fill",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}));break;default:r=t.append("circle").style("opacity",s?0:1).attr("series",(function(t){return t.series})).attr("class","sg-point sg-point-cr").attr("r",(function(t){return.5*("function"==typeof t.size?t.size(t,t._bind):t.size)})).attr("cx",(function(t){return n.x.scale(t.x)})).attr("cy",(function(t){var e=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return(t.y2?n.y2.scale:n.y.scale)(e)})).style("fill",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=n.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}))}s&&(s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,r.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}},t.prototype._updatePoints=function(t,i,s){if(t.size()){s&&(s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,t=t.transition().duration(s.duration).ease(s.ease));var r=this;switch(i){case"triangle-down":t.attr("points",(function(t){var e=e="function"==typeof t.size?t.size(t,t._bind):t.size,i=1.519676*e,s=.86602*i*.5,n=.5*i,o=r.x.scale(t.x),a=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return a=(t.y2?r.y2.scale:r.y.scale)(a),"".concat(o-n,",").concat(a+s," ").concat(o,",").concat(a-s," ").concat(o+n,",").concat(a+s)})).style("fill",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}));break;case"triangle":case"triangle-up":t.attr("points",(function(t){var e=e="function"==typeof t.size?t.size(t,t._bind):t.size,i=1.519676*e,s=.86602*i*.5,n=.5*i,o=r.x.scale(t.x),a=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return a=(t.y2?r.y2.scale:r.y.scale)(a),"".concat(o-n,",").concat(a-s," ").concat(o,",").concat(a+s," ").concat(o+n,",").concat(a-s)})).style("fill",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}));break;case"square":case"diamond":t.attr("width",(function(t){return"function"==typeof t.size?t.size(t,t._bind):t.size})).attr("height",(function(t){return"function"==typeof t.size?t.size(t,t._bind):t.size})).attr("x",(function(t){var e="function"==typeof t.size?t.size(t,t._bind):t.size;return r.x.scale(t.x)-e/2})).attr("y",(function(t){!t.y&&0!==t.y||Number.isNaN(t.y)||t.y;var e="function"==typeof t.size?t.size(t,t._bind):t.size;return(t.y2?r.y2.scale:r.y.scale)(t.y)-e/2})).attr("transform",(function(t){if("diamond"!==i)return"";var e=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return"rotate(45,".concat(r.x.scale(t.x),",").concat((t.y2?r.y2.scale:r.y.scale)(e),")")})).style("fill",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}));break;default:t.attr("r",(function(t){return.5*("function"==typeof t.size?t.size(t,t._bind):t.size)})).attr("cx",(function(t){return r.x.scale(t.x)})).attr("cy",(function(t){var e=!t.y&&0!==t.y||Number.isNaN(t.y)?0:t.y;return(t.y2?r.y2.scale:r.y.scale)(e)})).style("fill",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=r.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e}))}}}}(p,n),function(t,e){t.prototype.removeAllLines=function(){return this.removeLines().removePointLines()},t.prototype.removeLines=function(){return this.svgGraph.selectAll(".sg-line").remove(),this.lines&&this.lines.forEach((function(t){t._segments=null,t._d3s=null})),this},t.prototype.removePointLines=function(){return this.svgGraph.selectAll(".sg-point-line").remove(),this.pointLines&&this.pointLines.forEach((function(t){t._segments=null,t._d3s=null})),this},t.prototype.drawAllLines=function(t,e){return this.drawPointLines().drawLines(t,e)},t.prototype.drawLines=function(t,e){if(this.removeLines(),t||0===t||(t=20),(0==t||t<2)&&(t=2),!this.lines)return this;var i=this;return this.lines.forEach((function(e){e.lineFunction?e._segments=i._getLineSegmentsFromFunction(e.lineFunction,t,e.xRange,e.y2Axis,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?e._segments=[e.coords]:e._segments=i._getLineSegmentsFromCoordinates(e.coords,e.y2),e._segments&&(e._segments=e._segments.filter((function(t){return t&&t.length>=2})))})),this._drawLines(this.lines,"sg-line"),this},t.prototype.drawPointLines=function(t){if(this.removePointLines(),!this.pointLines)return this;var e=this;return this.pointLines.forEach((function(t){e.allowDrawBeyondGraph?t._segments=[t.coords]:t._segments=e._getLineSegmentsFromCoordinates(t.coords,t.y2),t._segments&&(t._segments=t._segments.filter((function(t){return t&&t.length>=2})))})),this._drawLines(this.pointLines,"sg-point-line",t),this},t.prototype.drawUpdateAllLines=function(t,e){return this.drawUpdateLines(t,e).drawUpdatePointLines(e)},t.prototype.drawUpdateLines=function(t,i){t||0===t||(t=20),(0==t||t<2)&&(t=2),i&&(i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut);var s=this;return this.lines.forEach((function(e){e.lineFunction?e._segments=s._getLineSegmentsFromFunction(e.lineFunction,t,e.xRange,e.y2Axis,!s.allowDrawBeyondGraph):s.allowDrawBeyondGraph?e._segments=[e.coords]:e._segments=s._getLineSegmentsFromCoordinates(e.coords,e.y2),e._segments&&(e._segments=e._segments.filter((function(t){return t&&t.length>=2})))})),s._updateLines(this.lines,"sg-line",i),this},t.prototype.drawUpdatePointLines=function(t){t&&(t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut);var i=this;return this.pointLines.forEach((function(t){i.allowDrawBeyondGraph?t._segments=[t.coords]:t._segments=i._getLineSegmentsFromCoordinates(t.coords,t.y2),t._segments&&(t._segments=t._segments.filter((function(t){return t&&t.length>=2})))})),i._updateLines(this.pointLines,"sg-point-line",t),this},t.prototype._drawLines=function(t,i,s){var r=this,n=this.svgGraph.selectAll(".sg-temporary-line").data(t).enter().append("path").attr("series",(function(t){return t.series})).attr("class",i).style("opacity",s?0:1).style("fill","none").attr("d",(function(t){var i=t.y2?r.y2:r.y,s=e.line().x((function(t){return r.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),n=t.style||{};for(var o in n)(!s||o&&"opacity"!=o.toLowerCase())&&i.style(o,n[o]);if(!("stroke"in n)){var a=r.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof a?a(t):a)}t._d3s=i}));s&&(s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,n.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))},t.prototype._updateLines=function(t,i,s){var r=this;if(!t)return this;var n=t.filter((function(t){return t._segments&&t._segments.length&&!t._segments.filter((function(t){return t.length<2})).length?!t._d3s:(segments._d3s&&(t._d3s.remove(),t._d3s=null),!1)})),o=this.svgGraph.selectAll("."+i);s&&(o=o.transition().duration(s.duration).ease(s.ease));var a=this;o.attr("d",(function(t){var i=t.y2?r.y2:r.y,s=e.line().x((function(t){return r.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),s=t.style||{};for(var r in s)i.style(r,s[r]);if(!("stroke"in s)){var n=a.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof n?n(t):n)}}));var l=this.svgGraph.selectAll(".sg-temporary-line").data(n).enter().append("path").attr("series",(function(t){return t.series})).attr("class",i).style("opacity",s?0:1).style("fill","none").attr("d",(function(t){var i=t.y2?a.y2:a.y,s=e.line().x((function(t){return a.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),r=t.style||{};for(var n in r)(!s||n&&"opacity"!=n.toLowerCase())&&i.style(n,r[n]);if(!("stroke"in r)){var o=a.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof o?o(t):o)}t._d3s=i}));s&&(s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,l.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}}(p,n),function(t,e){t.prototype.removeAreas=function(){return this.svgGraph.selectAll(".sg-area").remove(),this},t.prototype.drawAreas=function(t,e){var i=this;return this.removeAreas(),t||0===t||(t=20),t<2&&(t=2),this.areas?(this.areas.forEach((function(t){t.functions?t._parts=i._getAreasPolysFromFunctions(t.functions[0],t.functions[1],t.resolution,t.xRange,t.y2,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?t._parts=[t.coords]:t._parts=i._getAreaPolysFromCoordinates(t.coords,t.y2),t._parts&&(t._parts=t._parts.filter((function(t){return t&&t.length>=2})))})),this._drawAreas(t,e),this):this},t.prototype.drawUpdateAreas=function(t,e){var i=this;return t||0===t||(t=20),t<2&&(t=2),this.areas.forEach((function(t){t.functions?t._parts=i._getAreasPolysFromFunctions(t.functions[0],t.functions[1],t.resolution,t.xRange,t.y2,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?t._parts=[t.coords]:t._parts=i._getAreaPolysFromCoordinates(t.coords,t.y2),t._parts&&(t._parts=t._parts.filter((function(t){return t&&t.length>=2})))})),this._updateAreas(e),this},t.prototype._drawAreas=function(t,i){var s=this;if(this.areas){var r=this,n=this.svgGraph.selectAll(".sg-temporary-area").data(this.areas).enter().append("path").attr("series",(function(t){return t.series})).attr("class","sg-area").style("opacity",i?0:1).attr("d",(function(t){var i=t.y2?s.y2:s.y,r=e.area().x((function(t){return s.x.scale(t[0])})).y0((function(t){return i.scale(t[1])})).y1((function(t){return i.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(t){var s=e.select(this),n=t.style||{};for(var o in n)(!i||o&&"opacity"!=o.toLowerCase())&&s.style(o,n[o]);if(!("fill"in n)){var a=r.getColorBySeriesName(t.series,!0);s.style("fill","function"==typeof a?a(t):a)}t._d3s=s}));i&&(i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut,n.transition().duration(i.duration).ease(i.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}},t.prototype._updateAreas=function(t){var i=this;if(this.areas){t&&(t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut);var s=this.areas.filter((function(t){return t._parts&&t._parts.length&&!t._parts.filter((function(t){return t.length<2})).length?!t._d3s:(segments._d3s&&(t._d3s.remove(),t._d3s=null),!1)})),r=this.svgGraph.selectAll(".sg-area");t&&(r=r.transition().duration(t.duration).ease(t.ease));var n=this;r.attr("d",(function(t){var s=t.y2?i.y2:i.y,r=e.area().x((function(t){return i.x.scale(t[0])})).y0((function(t){return s.scale(t[1])})).y1((function(t){return s.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(t){var i=e.select(this),s=t.style||{};for(var r in s)i.style(r,s[r]);if(!("fill"in s)){var o=n.getColorBySeriesName(t.series,!0);i.style("fill","function"==typeof o?o(t):o)}}));var o=this.svgGraph.selectAll(".sg-temporary-area").data(s).enter().append("path").attr("series",(function(t){return t.series})).attr("class","sg-area").style("opacity",t?0:1).attr("d",(function(t){var s=t.y2?i.y2:i.y,r=e.area().x((function(t){return i.x.scale(t[0])})).y0((function(t){return s.scale(t[1])})).y1((function(t){return s.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(i){var s=e.select(this),r=i.style||{};for(var o in r)(!t||o&&"opacity"!=o.toLowerCase())&&s.style(o,r[o]);if(!("fill"in r)){var a=n.getColorBySeriesName(i.series,!0);s.style("fill","function"==typeof a?a(i):a)}i._d3s=s}));t&&(t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut,o.transition().duration(t.duration).ease(t.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}}}(p,n),function(t,e){t.prototype.addTooltipToPoints=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-point").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype.addTooltipToLines=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-line").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype.addTooltipToAreas=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-area").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype._constructTooltipFunctionality=function(t,i){var s=this.svgGraph.node();return function(r){if(!r)return null;i||(i={});var n,o=e.select("body"),a=i.offset||[15,15],l=r._groups[0];r.on("mouseover.sg-tooltip",(function(t,r){var h,c=e.pointer(t,o.node());for(var u in n?h={left:c[0]+a[0]+"px",top:c[1]+a[1]+"px"}:(o.selectAll(".sg-tooltip").remove(),(n=o.append("div")).attr("class","sg-tooltip"),h={position:"absolute",left:c[0]+a[0]+"px",top:c[1]+a[1]+"px","z-index":1001,"background-color":"#fff",border:"1px solid #777","border-radius":"4px",padding:"4px 6px","font-family":"'Century Gothic', CenturyGothic, Geneva, AppleGothic, sans-serif","font-size":"12px"}),h)n.style(u,h[u]);if(i.style)for(var p in i.style)n.style(p,i.style[p]);i.mouseover&&i.mouseover(r,e.pointer(t,s),l)})).on("mousemove.sg-tooltip",(function(i,r){if(n){var h=e.pointer(i,o.node());n.style("left",h[0]+a[0]+"px").style("top",h[1]+a[1]+"px");var c=null;t&&(c=t(r,e.pointer(i,s),l)),c?n.html(c):(n.remove(),n=null)}})).on("mouseout.sg-tooltip",(function(t,r){i.mouseout&&i.mouseout(r,e.pointer(t,s),l),n&&(n.remove(),n=null)}))}},t.prototype.highlightPoints=function(t,e,i,s,r){var n=".sg-point";t&&(n+="[series='"+t+"']");var o=this;return this.svgGraph.selectAll(n).each((function(t,n,a){if(!e||e(t)){var l=o.x.scale,h=t.y2?o.y2.scale:o.y.scale;i||(i=t.wasNull?0:"function"==typeof t.pointsize?t.pointsize():t.pointsize),s||(s=t.wasNull?"none":o.getColorBySeriesName(t.series,!0));var c=i||t.pointsize;"function"==typeof c&&(c=c.call(t));var u=o.svgGraph.append("rect").attr("class","sg-point-highlight").attr("width",c).attr("height",c).attr("x",l(t.x)-c/2).attr("y",h(t.y)-c/2).attr("transform","rotate(45,"+l(t.x)+","+h(t.y)+")").style("fill",s);if(r)for(var p in r)u.style(p,r[p])}})),this},t.prototype.removeHighlightPoints=function(){return this.svgGraph.selectAll(".sg-point-highlight").remove(),this},t.prototype.removeHighlights=function(){return this.removeHighlightPoints(),this}}(p,n),function(t,e){t.prototype.highlightPoints=function(t,e,i,s,r){var n=".sg-point";t&&(n+="[series='"+t+"']");var o=this;return this.svgGraph.selectAll(n).each((function(t,n,a){if(!e||e(t)){var l=o.x.scale,h=t.y2?o.y2.scale:o.y.scale;i||(i=t.wasNull?0:"function"==typeof t.pointsize?t.pointsize():t.pointsize),s||(s=t.wasNull?"none":o.getColorBySeriesName(t.series,!0));var c=i||t.pointsize;"function"==typeof c&&(c=c.call(t));var u=o.svgGraph.append("rect").attr("class","sg-point-highlight").attr("width",c).attr("height",c).attr("x",l(t.x)-c/2).attr("y",h(t.y)-c/2).attr("transform","rotate(45,"+l(t.x)+","+h(t.y)+")").style("fill",s);if(r)for(var p in r)u.style(p,r[p])}})),this},t.prototype.removeHighlightPoints=function(){return this.svgGraph.selectAll(".sg-point-highlight").remove(),this},t.prototype.removeHighlights=function(){return this.removeHighlightPoints(),this}}(p),p.prototype.clearAllData=function(t){return this.clearPointsData(t),this.clearLinesData(t),this.clearAreasData(t),this},p.prototype.removeAll=function(){return this.removePoints().removeAllLines().removeAreas(),this},p.prototype.saveAsPng=function(t){t||(t="graph.png"),t.toLowerCase().endsWith(".png")||(t+=".png");var e=this.svg.attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").node(),i=(new XMLSerializer).serializeToString(e),s=document.createElement("canvas");if(s.style.display="none",s.width=this.containerWidth,s.height=this.containerHeight,navigator.msSaveBlob&&canvg)return i=i.replace('style="width: 100%; height: 1px;','style="width:'+this.containerWidth+"px; height:"+this.containerHeight+"px;"),canvg(s,i),navigator.msSaveBlob(new Blob([s.msToBlob()],{type:"image/png"}),t),this;var r=document.createElement("a");r.style.display="none",r.download=t,this.svg.node().parentNode.appendChild(r);var n=new Image;n.onload=function(){if(s.getContext("2d").drawImage(n,0,0),navigator.msSaveBlob)try{navigator.msSaveBlob(new Blob([s.msToBlob()],{type:"image/png"}),t)}catch(t){alert("Sorry, SVG to PNG downloads are restricted in Internet Explorer, please try with another browser.")}else r.href=s.toDataURL("image/png"),r.click();r.parentElement.removeChild(r),s.remove()},n.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))};const y=p})(),r.default})()));